"use strict";(self["webpackChunkthedaoscapefrontend"]=self["webpackChunkthedaoscapefrontend"]||[]).push([[401],{33248:(e,t,o)=>{o.r(t),o.d(t,{default:()=>I});var a=o(34182);const n={class:"row q-col-gutter-md"},r={class:"q-mt-xl"},l={class:"text-grey-7 text-caption"};function s(e,t,o,s,i,c){const d=(0,a.resolveComponent)("page-header"),u=(0,a.resolveComponent)("q-btn"),m=(0,a.resolveComponent)("q-card"),p=(0,a.resolveComponent)("q-carousel-slide"),h=(0,a.resolveComponent)("q-carousel"),g=(0,a.resolveComponent)("q-tab"),b=(0,a.resolveComponent)("q-tabs"),v=(0,a.resolveComponent)("q-separator"),y=(0,a.resolveComponent)("buy-ram"),k=(0,a.resolveComponent)("action-proposer"),C=(0,a.resolveComponent)("q-tab-panel"),f=(0,a.resolveComponent)("sell-ram"),V=(0,a.resolveComponent)("q-tab-panels"),_=(0,a.resolveComponent)("q-slider"),w=(0,a.resolveComponent)("q-card-section"),N=(0,a.resolveComponent)("q-dialog"),q=(0,a.resolveComponent)("q-page"),R=(0,a.resolveDirective)("close-popup");return(0,a.openBlock)(),(0,a.createBlock)(q,{padding:"",class:"constrain-page-width"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{title:"Resources"}),(0,a.createVNode)(h,{modelValue:e.resource_carousel_slide,"onUpdate:modelValue":t[0]||(t[0]=t=>e.resource_carousel_slide=t),"keep-alive":!1,navigation:!1,infinite:"",arrows:e.getChunkSize<3,"control-color":"primary","transition-prev":"slide-right","transition-next":"slide-left",swipeable:!0,animated:"",padding:!1,height:"185px",class:"resource-carousel bg-transparent"},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.chunkArray(e.resourceComponents,e.getChunkSize),((t,o)=>((0,a.openBlock)(),(0,a.createBlock)(p,{name:o,class:"no-padding",style:{overflow:"visible !important"},key:o},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",n,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(t,(t=>((0,a.openBlock)(),(0,a.createElementBlock)("div",{key:t.key,class:"col-xs-12 col-sm-6 col-md-4"},[(0,a.createVNode)(m,{class:"q-pb-md no-shadow border-primary"},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(),(0,a.createBlock)((0,a.resolveDynamicComponent)(t.component))),(0,a.createVNode)(u,{round:"",icon:"settings",flat:"",color:"primary",class:"absolute-top-right q-ma-sm",onClick:o=>{e.dialog_Resource_warning.type=t.key,e.dialog_Resource_warning.visible=!0}},null,8,["onClick"])])),_:2},1024)])))),128))])])),_:2},1032,["name"])))),128))])),_:1},8,["modelValue","arrows"]),(0,a.createVNode)(b,{modelValue:e.active_tab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.active_tab=t),class:"text-primary q-mt-md",dense:"",align:"left"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(g,{label:"buy ram",name:"buyram"}),(0,a.createVNode)(g,{label:"sell ram",name:"sellram"})])),_:1},8,["modelValue"]),(0,a.createVNode)(v),(0,a.createVNode)(V,{modelValue:e.active_tab,"onUpdate:modelValue":t[2]||(t[2]=t=>e.active_tab=t),animated:"",class:"bg-transparent q-mt-md","transition-prev":"fade","transition-next":"fade"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(C,{name:"buyram",class:"overflow-hidden no-padding"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(k,null,{default:(0,a.withCtx)((e=>[(0,a.createVNode)(y,{onPropose:e.propose,onAddtobucket:e.addtobucket},null,8,["onPropose","onAddtobucket"])])),_:1})])),_:1}),(0,a.createVNode)(C,{name:"sellram",class:"overflow-hidden no-padding"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(k,null,{default:(0,a.withCtx)((e=>[(0,a.createVNode)(f,{onPropose:e.propose,onAddtobucket:e.addtobucket},null,8,["onPropose","onAddtobucket"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.createVNode)(N,{modelValue:e.dialog_Resource_warning.visible,"onUpdate:modelValue":t[4]||(t[4]=t=>e.dialog_Resource_warning.visible=t)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(m,{class:"overflow-hidden",style:{"min-width":"350px"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(w,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{title:`${e.dialog_Resource_warning.type.toUpperCase()} Warning Level`},null,8,["title"]),(0,a.withDirectives)((0,a.createVNode)(u,{icon:"close",flat:"",round:"",dense:"",class:"q-ma-md absolute-top-right"},null,512),[[R]]),(0,a.createElementVNode)("div",r,[(0,a.createVNode)(_,{modelValue:e.getResourceWarningLevels[e.dialog_Resource_warning.type],"onUpdate:modelValue":t[3]||(t[3]=t=>e.getResourceWarningLevels[e.dialog_Resource_warning.type]=t),min:1,max:99,"label-always":!0,label:"","label-color":"primary","label-value":e.getResourceWarningLevels[e.dialog_Resource_warning.type]+"%",color:"primary",onInput:e.updateResourceWarningLevel},null,8,["modelValue","label-value","onInput"])]),(0,a.createElementVNode)("p",l," Set a warning level for the groups "+(0,a.toDisplayString)(e.dialog_Resource_warning.type.toUpperCase())+" consumption. ",1)])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}o(10071);var i=o(55250),c=o(98062),d=o(33314);const u={class:"q-col-gutter-md q-pb-xs"},m={class:"row justify-between"};function p(e,t,o,n,r,l){const s=(0,a.resolveComponent)("q-input"),i=(0,a.resolveComponent)("threshold-badge"),c=(0,a.resolveComponent)("propose-bucket-btn");return(0,a.openBlock)(),(0,a.createElementBlock)("div",u,[(0,a.createVNode)(s,{modelValue:e.action.data.payer,"onUpdate:modelValue":t[0]||(t[0]=t=>e.action.data.payer=t),label:"payer",outlined:"","bottom-slots":"",readonly:""},null,8,["modelValue"]),(0,a.createVNode)(s,{modelValue:e.action.data.receiver,"onUpdate:modelValue":t[1]||(t[1]=t=>e.action.data.receiver=t),label:"receiver",outlined:"","bottom-slots":"",readonly:""},null,8,["modelValue"]),(0,a.createVNode)(s,{ref:"quant",type:"number",modelValue:e.action.data.quant,"onUpdate:modelValue":t[2]||(t[2]=t=>e.action.data.quant=t),label:"quantity",outlined:"","bottom-slots":"",placeholder:"eos amount","no-error-icon":"",rules:[e=>!!e||"* Required",e=>e>0||"Must be greater then zero",e.validateAmount]},{append:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.symbol),1)])),_:1},8,["modelValue","rules"]),(0,a.createElementVNode)("div",m,[(0,a.createVNode)(i,{label:"",contract:e.action.account,action_name:e.action.name},null,8,["contract","action_name"]),(0,a.createVNode)(c,{onClickPropose:e.emitPropose,onClickBucket:e.emitBucket,label:"buy ram",disabled:!1},null,8,["onClickPropose","onClickBucket"])])])}var h=o(69917),g=o(92287);const b=(0,a.defineComponent)({name:"buyRam",components:{thresholdBadge:h.Z,proposeBucketBtn:g.Z},data(){return{formIsValidated:!1,token_contract:"eosio.token",symbol:"EOS",action:{account:"eosio",name:"buyram",data:{payer:this.$store.state.group.activeGroup,receiver:this.$store.state.group.activeGroup,quant:""}}}},computed:{...(0,i.Se)({getActiveGroup:"group/getActiveGroup",getGroupWallet:"group/getGroupWallet"})},methods:{getPaymentToken(){return this.getGroupWallet.find((e=>e.contract==this.token_contract&&e.symbol==this.symbol))},validateAmount(e){let t=this.getPaymentToken();return t?!(Number(e)>Number(t.amount))||`Group only has ${t.amount} ${this.symbol}`:`Group doesn't have ${this.symbol} in wallet`},emitPropose(){if(this.$refs.quant.validate(),this.$refs.quant.hasError)return;let e=JSON.parse(JSON.stringify(this.action));e.data.quant=e.data.quant+" "+this.symbol;const t={actions:[e],description:`Proposal to buy extra ram for "${this.getActiveGroup}"`,title:"Buy Ram"};this.$emit("propose",t)},emitBucket(){if(this.$refs.quant.validate(),this.$refs.quant.hasError)return;let e=JSON.parse(JSON.stringify(this.action));e.data.quant=e.data.quant+" "+this.symbol,this.$emit("addtobucket",e)}},watch:{"action.data.quant":function(e,t){this.action.data.quant&&this.getPaymentToken()&&(this.action.data.quant=Number(this.action.data.quant).toFixed(this.getPaymentToken().precision))}}});var v=o(74260),y=o(64689),k=o(7518),C=o.n(k);const f=(0,v.Z)(b,[["render",p]]),V=f;C()(b,"components",{QInput:y.Z});const _={class:"q-col-gutter-md q-pb-xs"},w=(0,a.createTextVNode)(" bytes "),N={class:"row justify-between items-center"};function q(e,t,o,n,r,l){const s=(0,a.resolveComponent)("q-input"),i=(0,a.resolveComponent)("threshold-badge"),c=(0,a.resolveComponent)("propose-bucket-btn");return(0,a.openBlock)(),(0,a.createElementBlock)("div",_,[(0,a.createVNode)(s,{modelValue:e.action.data.account,"onUpdate:modelValue":t[0]||(t[0]=t=>e.action.data.account=t),label:"account",outlined:"","bottom-slots":"",readonly:""},null,8,["modelValue"]),(0,a.createVNode)(s,{ref:"bytes",type:"number",modelValue:e.action.data.bytes,"onUpdate:modelValue":t[1]||(t[1]=t=>e.action.data.bytes=t),label:"bytes",outlined:"","bottom-slots":"",placeholder:"amount of bytes to sell","no-error-icon":"",rules:[e=>!!e||"* Required",e=>e>1||"Must be greater then one",e.validateRamBytesAmount]},{append:(0,a.withCtx)((()=>[w])),_:1},8,["modelValue","rules"]),(0,a.createElementVNode)("div",N,[(0,a.createVNode)(i,{label:"",threshold:e.getLinkedThresholdForContractAction(e.action.account,e.action.name)},null,8,["threshold"]),(0,a.createVNode)(c,{onClickPropose:e.emitPropose,onClickBucket:e.emitBucket,label:"sell ram",disabled:!1},null,8,["onClickPropose","onClickBucket"])])])}var R=o(40019);const x=(0,a.defineComponent)({name:"sellRam",components:{thresholdBadge:h.Z,proposeBucketBtn:g.Z},data(){return{action:{account:"eosio",name:"sellram",data:{account:this.$store.state.group.activeGroup,bytes:""}}}},computed:{...(0,i.Se)({getRAMStats:"group/getRAMStats",getActiveGroup:"group/getActiveGroup",getLinkedThresholdForContractAction:"group/getLinkedThresholdForContractAction"})},methods:{emitPropose(){if(this.$refs.bytes.validate(),this.$refs.bytes.hasError)return;let e=JSON.parse(JSON.stringify(this.action));const t={actions:[e],description:`Proposal to sell ram from "${this.getActiveGroup}"`,title:"Sell Ram"};R.log("sellRam component",t),this.$emit("propose",t)},emitBucket(){if(this.$refs.bytes.validate(),this.$refs.bytes.hasError)return;let e=JSON.parse(JSON.stringify(this.action));this.$emit("addtobucket",e)},validateRamBytesAmount(e){let t=this.getRAMStats.available_bytes;return t?!(Number(e)>Number(t))||`Max amount is ${t} bytes`:"Group doesn't have free RAM"}},watch:{"action.data.bytes":function(e,t){this.action.data.bytes&&(this.action.data.bytes=Number(this.action.data.bytes).toFixed(0))}}}),B=(0,v.Z)(x,[["render",q]]),A=B;C()(x,"components",{QInput:y.Z});var S=o(16336);const Z=(0,a.defineComponent)({name:"groupRecources",components:{pageHeader:d.Z,actionProposer:c.Z,buyRam:V,sellRam:A},data(){return{resourceComponents:[{key:"ram",component:(0,a.markRaw)((0,a.defineAsyncComponent)((()=>o.e(1874).then(o.bind(o,81874)))))},{key:"cpu",component:(0,a.markRaw)((0,a.defineAsyncComponent)((()=>o.e(4587).then(o.bind(o,64587)))))},{key:"net",component:(0,a.markRaw)((0,a.defineAsyncComponent)((()=>o.e(7184).then(o.bind(o,77184)))))}],resource_carousel_slide:0,dialog_Resource_warning:{visible:!1,type:""},active_tab:""}},computed:{...(0,i.Se)({getAccountName:"proton/getAccountName",getThresholds:"group/getThresholds",getActiveGroup:"group/getActiveGroup",getThresholdLinks:"group/getThresholdLinks",getResourceWarningLevels:"user/getResourceWarningLevels"}),getChunkSize(){let e=1;return this.$q.screen.gt.xs&&(e=2),this.$q.screen.gt.sm&&(e=3),e}},methods:{chunkArray:S.F3,updateResourceWarningLevel(e){let t={};t[this.dialog_Resource_warning.type]=e,this.$store.commit("user/setResourceWarningLevels",t)}},watch:{getChunkSize:function(e,t){e!=t&&(this.resource_carousel_slide=0)}}});var $=o(24379),P=o(31277),G=o(34593),T=o(10151),L=o(2165),E=o(57547),Q=o(58408),U=o(65869),W=o(5906),O=o(86602),F=o(46778),J=o(25589),M=o(62064),D=o(60677);const z=(0,v.Z)(Z,[["render",s]]),I=z;C()(Z,"components",{QPage:$.Z,QCarousel:P.Z,QCarouselSlide:G.Z,QCard:T.Z,QBtn:L.Z,QTabs:E.Z,QTab:Q.Z,QSeparator:U.Z,QTabPanels:W.Z,QTabPanel:O.Z,QDialog:F.Z,QCardSection:J.Z,QSlider:M.Z}),C()(Z,"directives",{ClosePopup:D.Z})}}]);