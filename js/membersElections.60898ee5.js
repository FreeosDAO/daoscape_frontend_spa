"use strict";(self["webpackChunkthedaoscapefrontend"]=self["webpackChunkthedaoscapefrontend"]||[]).push([[105],{49697:(e,t,a)=>{a.r(t),a.d(t,{default:()=>qt});var o=a(34182);const n={key:0},i=(0,o.createTextVNode)(" active "),s=(0,o.createTextVNode)("paused"),c=(0,o.createTextVNode)("fired"),l={key:0,class:"q-pt-md"},d={key:1,class:"q-pt-md"},r={key:2,class:"q-pt-md"};function m(e,t,a,m,g,p){const u=(0,o.resolveComponent)("page-header"),h=(0,o.resolveComponent)("q-tab"),C=(0,o.resolveComponent)("q-badge"),f=(0,o.resolveComponent)("q-tabs"),v=(0,o.resolveComponent)("list-user-votes"),V=(0,o.resolveComponent)("list-candidates"),N=(0,o.resolveComponent)("register-candidate"),k=(0,o.resolveComponent)("manage-candidacy"),y=(0,o.resolveComponent)("q-page");return(0,o.openBlock)(),(0,o.createBlock)(y,{padding:"",class:"constrain-page-width"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u,{title:"Elections"}),(0,o.createVNode)(f,{modelValue:e.selected_tab,"onUpdate:modelValue":t[0]||(t[0]=t=>e.selected_tab=t),class:"bg-secondary text-white",align:"left","indicator-color":"primary"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(h,{label:"Vote",name:"vote"}),e.getIsMember?((0,o.openBlock)(),(0,o.createElementBlock)("div",n,[e.getIsCandidate?((0,o.openBlock)(),(0,o.createBlock)(h,{key:0,label:"my candidacy",name:"manage candidacy"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(o.Transition,{"enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut",appear:""},{default:(0,o.withCtx)((()=>[1==e.getIsCandidate.state?((0,o.openBlock)(),(0,o.createBlock)(C,{class:"tab-badge-margin",color:"positive",floating:"",key:"active"},{default:(0,o.withCtx)((()=>[i])),_:1})):2==e.getIsCandidate.state?((0,o.openBlock)(),(0,o.createBlock)(C,{class:"tab-badge-margin",color:"warning",floating:"",key:"paused"},{default:(0,o.withCtx)((()=>[s])),_:1})):3==e.getIsCandidate.state?((0,o.openBlock)(),(0,o.createBlock)(C,{class:"tab-badge-margin",color:"negative",floating:"",key:"fired"},{default:(0,o.withCtx)((()=>[c])),_:1})):(0,o.createCommentVNode)("",!0)])),_:1})])),_:1})):((0,o.openBlock)(),(0,o.createBlock)(h,{key:1,label:"register as candidate",name:"register candidacy"}))])):(0,o.createCommentVNode)("",!0)])),_:1},8,["modelValue"]),"vote"==e.selected_tab?((0,o.openBlock)(),(0,o.createElementBlock)("div",l,[(0,o.createVNode)(v,{class:"z-max"}),(0,o.createVNode)(V)])):(0,o.createCommentVNode)("",!0),"register candidacy"==e.selected_tab?((0,o.openBlock)(),(0,o.createElementBlock)("div",d,[(0,o.createVNode)(N,{onNavigate:t[1]||(t[1]=t=>e.selected_tab=t)})])):(0,o.createCommentVNode)("",!0),"manage candidacy"==e.selected_tab?((0,o.openBlock)(),(0,o.createElementBlock)("div",r,[(0,o.createVNode)(k,{onNavigate:t[2]||(t[2]=t=>e.selected_tab=t)})])):(0,o.createCommentVNode)("",!0)])),_:1})}var g=a(10741),p=a(33314);const u={class:"text-caption",key:"no_votes"},h={class:"row justify-between items-center q-mt-sm"},C={key:0,class:"rounded-borders bg-secondary text-white q-px-sm"},f={key:0,class:"my-votes-fixed rounded-borders-bottom row items-center bg-primary q-pl-xs q-pr-md q-py-sm"},v={class:"text-caption q-pr-sm",key:"no_votes"};function V(e,t,a,n,i,s){const c=(0,o.resolveComponent)("profile-pic"),l=(0,o.resolveComponent)("q-item-section"),d=(0,o.resolveComponent)("q-item-label"),r=(0,o.resolveComponent)("q-icon"),m=(0,o.resolveComponent)("q-item"),g=(0,o.resolveComponent)("q-card"),p=(0,o.resolveComponent)("q-btn"),V=(0,o.resolveComponent)("q-card-section"),N=(0,o.resolveDirective)("intersection");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createBlock)(g,{class:"q-mb-md"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(V,{class:"column justify-between",style:{"min-height":"150px"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(o.TransitionGroup,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut",class:"row q-gutter-sm",tag:"div",mode:"in-out"},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.getNewVotes,(t=>((0,o.openBlock)(),(0,o.createBlock)(g,{key:t,class:(0,o.normalizeClass)(e.$q.dark.isActive?"bg-secondary":"")},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(m,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(l,{side:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(c,{size:30,account:t},null,8,["account"])])),_:2},1024),(0,o.createVNode)(l,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(d,null,{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(t),1)])),_:2},1024)])),_:2},1024),(0,o.createVNode)(l,{side:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(r,{name:"close",color:"negative",class:"cursor-pointer",onClick:a=>e.removeNewVote(t)},null,8,["onClick"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["class"])))),128)),e.getNewVotes&&0==e.getNewVotes.length?((0,o.openBlock)(),(0,o.createElementBlock)("div",u," You don't have active votes ")):(0,o.createCommentVNode)("",!0)])),_:1}),(0,o.createElementVNode)("div",h,[e.getElectionsConfig?((0,o.openBlock)(),(0,o.createElementBlock)("div",C,(0,o.toDisplayString)(`${e.getNewVotes.length}/${e.getElectionsConfig.max_votes}`),1)):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(p,{label:"vote",icon:"mdi-vote",color:"primary",class:(0,o.normalizeClass)(e.didVotesChange?"pulse":""),loading:e.getIsTransacting,onClick:e.castNewVotes,disabled:!e.didVotesChange},null,8,["class","loading","onClick","disabled"])])])),_:1})])),_:1})),[[N,e.vote_intersection]]),(0,o.createVNode)(o.Transition,{tag:"div","enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"},{default:(0,o.withCtx)((()=>[e.show_fixed_votes&&e.timedelay?((0,o.openBlock)(),(0,o.createElementBlock)("div",f,[(0,o.createVNode)(p,{label:"vote",icon:"mdi-vote",class:(0,o.normalizeClass)(["q-mr-lg",e.didVotesChange?"pulse":""]),color:"secondary",loading:e.getIsTransacting,onClick:e.castNewVotes,disabled:!e.didVotesChange},null,8,["class","loading","onClick","disabled"]),(0,o.createVNode)(o.TransitionGroup,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut",class:"row",tag:"div"},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.getNewVotes,(e=>((0,o.openBlock)(),(0,o.createElementBlock)("div",{key:`f${e}`},[(0,o.createVNode)(c,{account:e,tooltip:"",size:30,style:{"margin-left":"-13px"},class:"shadow-2"},null,8,["account"])])))),128)),e.getNewVotes&&0==e.getNewVotes.length?((0,o.openBlock)(),(0,o.createElementBlock)("div",v," No votes ")):(0,o.createCommentVNode)("",!0)])),_:1})])):(0,o.createCommentVNode)("",!0)])),_:1})])}var N=a(37446),k=a(40019);const y=(0,o.defineComponent)({name:"listUserVotes",components:{profilePic:N.Z},data(){return{show_fixed_votes:!1,timedelay:!1,vote_intersection:{handler:this.onIntersection,cfg:{root:null}}}},computed:{...(0,g.Se)({getElectionsContract:"elections/getElectionsContract",getAccountName:"proton/getAccountName",getElectionsConfig:"elections/getElectionsConfig",getElectionsState:"elections/getElectionsState",getUserVotes:"elections/getUserVotes",getCandidates:"elections/getCandidates",getIsTransacting:"proton/getIsTransacting"}),getNewVotes(){return this.getCandidates?this.getCandidates.filter((e=>e.vote)).map((e=>e.cand)):[]},didVotesChange(){if(this.getNewVotes){let e=this.getNewVotes,t=this.getUserVotes?this.getUserVotes.votes:[];if(e.length!=t.length)return!0;{let e=this.getNewVotes.filter((e=>!t.includes(e)));return!!e.length}}}},methods:{async fetchUserVotes(){!this.getUserVotes&&this.getAccountName&&this.getElectionsContract&&await this.$store.dispatch("elections/fetchUserVotes",{voter:this.getAccountName,vm:this})},async castNewVotes(){let e={account:this.getElectionsContract,name:"vote",data:{voter:this.getAccountName,new_votes:this.getNewVotes}},t=await this.$store.dispatch("proton/transact",{actions:[e],disable_signing_overlay:!0});t&&t.trxid&&setTimeout((()=>{this.$store.dispatch("elections/fetchUserVotes",{voter:this.getAccountName,vm:this})}),1e3)},onIntersection(e){k.log(e),e.isIntersecting?this.show_fixed_votes=!1:this.show_fixed_votes=!0},removeNewVote(e){this.getCandidates.find((t=>t.cand==e&&!0===t.vote)).vote=!1,this.$store.commit("elections/updateCandidateTotalVotes",{cand:e,delta:-1})}},mounted(){setTimeout((()=>{this.timedelay=!0}),500)},watch:{getAccountName:{immediate:!0,handler(e,t){e?e!=t&&this.fetchUserVotes():this.$store.commit("elections/setUserVotes",!1)}}}});var _=a(74260),w=a(10151),x=a(25589),E=a(83414),b=a(52035),q=a(2350),S=a(24554),B=a(2165),Z=a(15094),I=a(7518),T=a.n(I);const U=(0,_.Z)(y,[["render",V]]),Q=U;function A(e,t,a,n,i,s){const c=(0,o.resolveComponent)("q-icon"),l=(0,o.resolveComponent)("q-input"),d=(0,o.resolveComponent)("candidate");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createVNode)(l,{placeholder:"Find Candidate",outlined:"",modelValue:e.searchfilter,"onUpdate:modelValue":t[1]||(t[1]=t=>e.searchfilter=t),modelModifiers:{trim:!0}},{prepend:(0,o.withCtx)((()=>[(0,o.createVNode)(c,{name:"search",class:"cursor-pointer"})])),append:(0,o.withCtx)((()=>[(0,o.createVNode)(o.TransitionGroup,{appear:"","enter-active-class":"animated fadeInRight","leave-active-class":"animated fadeOutRight",tag:"div"},{default:(0,o.withCtx)((()=>[e.searchfilter.length?((0,o.openBlock)(),(0,o.createBlock)(c,{name:"close",key:"has_filter",onClick:t[0]||(t[0]=t=>e.searchfilter=""),class:"cursor-pointer"})):(0,o.createCommentVNode)("",!0)])),_:1})])),_:1},8,["modelValue"]),(0,o.createVNode)(o.TransitionGroup,{appear:"","enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut",tag:"div"},{default:(0,o.withCtx)((()=>[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)(e.candidates,(e=>((0,o.openBlock)(),(0,o.createBlock)(d,{candidate:e,key:e.cand},null,8,["candidate"])))),128))])),_:1})])}T()(y,"components",{QCard:w.Z,QCardSection:x.Z,QItem:E.Z,QItemSection:b.Z,QItemLabel:q.Z,QIcon:S.Z,QBtn:B.Z}),T()(y,"directives",{Intersection:Z.Z});const $={class:"q-mt-md"},D={class:"row justify-between"},P=(0,o.createTextVNode)("Votes"),z={key:0,class:"row items-center"},F={key:0,class:"row justify-center"},j={class:"text-center"},L=(0,o.createElementVNode)("div",{class:"text-grey"},"Loading Profile",-1),G=(0,o.createTextVNode)("          "),M=(0,o.createElementVNode)("b",null,"Requested pay: ",-1),O=(0,o.createElementVNode)("b",null,"Staked: ",-1);function R(e,t,a,n,i,s){const c=(0,o.resolveComponent)("profile-pic"),l=(0,o.resolveComponent)("q-item-section"),d=(0,o.resolveComponent)("profile-link"),r=(0,o.resolveComponent)("q-item-label"),m=(0,o.resolveComponent)("q-item"),g=(0,o.resolveComponent)("q-icon"),p=(0,o.resolveComponent)("q-checkbox"),u=(0,o.resolveComponent)("q-separator"),h=(0,o.resolveComponent)("q-spinner"),C=(0,o.resolveComponent)("q-markdown"),f=(0,o.resolveComponent)("q-card-section"),v=(0,o.resolveComponent)("date-string"),V=(0,o.resolveComponent)("q-expansion-item"),N=(0,o.resolveComponent)("q-card");return(0,o.openBlock)(),(0,o.createElementBlock)("div",$,[(0,o.createVNode)(N,{class:(0,o.normalizeClass)(["candidate",{"candidate-selected":e.candidate.vote}])},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(V,{class:"primary-hover-list",onShow:e.fetchProfileData,group:"candidate"},{header:(0,o.withCtx)((()=>[(0,o.createVNode)(l,{avatar:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(c,{size:60,account:e.candidate.cand,icon:e.getIsGuardian(e.candidate.cand)?"mdi-star":""},null,8,["account","icon"])])),_:1}),(0,o.createVNode)(l,null,{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",D,[(0,o.createVNode)(m,{class:"no-padding"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(l,{side:""}),(0,o.createVNode)(l,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(r,{class:"text-capitalize text-h6 text-weight-light"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(d,{account:e.candidate.cand,inversestyle:""},null,8,["account"])])),_:1})])),_:1})])),_:1}),(0,o.createVNode)(m,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(l,{side:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(g,{name:"mdi-vote"})])),_:1}),(0,o.createVNode)(l,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(r,null,{default:(0,o.withCtx)((()=>[P])),_:1}),(0,o.createVNode)(r,{caption:""},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.candidate.total_votes),1)])),_:1})])),_:1})])),_:1})])])),_:1}),(0,o.createVNode)(l,{side:""},{default:(0,o.withCtx)((()=>[e.getElectionsConfig?((0,o.openBlock)(),(0,o.createElementBlock)("div",z,[(0,o.createVNode)(p,{class:(0,o.normalizeClass)({invisible:!(e.getElectionsConfig.allow_self_vote||e.getAccountName!=e.candidate.cand)}),modelValue:e.candidate.vote,"onUpdate:modelValue":t[0]||(t[0]=t=>e.candidate.vote=t),onInput:e.updateVote},null,8,["class","modelValue","onInput"])])):(0,o.createCommentVNode)("",!0)])),_:1})])),default:(0,o.withCtx)((()=>[(0,o.createVNode)(u),(0,o.createVNode)(f,null,{default:(0,o.withCtx)((()=>[e.is_profile_data_loading?((0,o.openBlock)(),(0,o.createElementBlock)("div",F,[(0,o.createElementVNode)("div",j,[(0,o.createVNode)(h,{color:"primary",size:"40px"}),L])])):(0,o.createCommentVNode)("",!0),e.profile_data?((0,o.openBlock)(),(0,o.createBlock)(C,{key:1,src:e.profile_data.text,"no-abbreviation":!1},{default:(0,o.withCtx)((()=>[G])),_:1},8,["src"])):(0,o.createCommentVNode)("",!0)])),_:1}),(0,o.createVNode)(u),(0,o.createVNode)(f,{class:"row justify-between"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(v,{date:e.candidate.registered,prepend:"Candidate since:"},null,8,["date"]),(0,o.createElementVNode)("div",null,[M,(0,o.createTextVNode)((0,o.toDisplayString)(e.candidate.pay.quantity),1)]),(0,o.createElementVNode)("div",null,[O,(0,o.createTextVNode)((0,o.toDisplayString)(e.candidate_stake.quantity),1)])])),_:1})])),_:1},8,["onShow"])])),_:1},8,["class"])])}var Y=a(40379),H=a(85054),J=a(72663),K=a(40019);const W=(0,o.defineComponent)({name:"listCandidates",components:{profilePic:N.Z,profileLink:Y.Z,dateString:H.Z},props:{candidate:{type:Object,default:()=>({})}},data(){return{profile_data:!1,is_profile_data_loading:!1,candidate_stake:!1}},computed:{...(0,g.Se)({getAccountName:"proton/getAccountName",getElectionsState:"elections/getElectionsState",getElectionsConfig:"elections/getElectionsConfig",getCandidates:"elections/getCandidates",getIsGuardian:"group/getIsGuardian"})},methods:{updateVote(e){K.log(e),e&&this.getCandidates.filter((e=>e.vote)).length==this.getElectionsConfig.max_votes?(0,J.cB)({message:"Maximum number of votes is "+this.getElectionsConfig.max_votes}):(this.candidate.vote=e,e?this.$store.commit("elections/updateCandidateTotalVotes",{cand:this.candidate.cand,delta:1}):this.$store.commit("elections/updateCandidateTotalVotes",{cand:this.candidate.cand,delta:-1}))},async fetchProfileData(){this.is_profile_data_loading=!0,this.profile_data=await this.$store.dispatch("group/fetchProfile",{accountname:this.candidate.cand,vm:this}),this.is_profile_data_loading=!1,this.candidate_stake||(this.candidate_stake=(await this.$store.dispatch("elections/fetchUserStakes",{user:this.candidate.cand,vm:this}))[0])}},watch:{}});var X=a(60429),ee=a(65735),te=a(65869),ae=a(6833);const oe=(0,_.Z)(W,[["render",R]]),ne=oe;T()(W,"components",{QCard:w.Z,QExpansionItem:X.Z,QItemSection:b.Z,QItem:E.Z,QItemLabel:q.Z,QIcon:S.Z,QCheckbox:ee.Z,QSeparator:te.Z,QCardSection:x.Z,QSpinner:ae.Z});const ie={key:0,class:"row"},se={class:"absolute-top-right"},ce={class:"row"},le={class:"row justify-center relative-position"},de=["src"],re={class:"row justify-center",style:{"padding-top":"100px"}},me={class:"col-auto"},ge={class:"q-ma-md"},pe={class:"row"},ue=(0,o.createElementVNode)("h5",{class:"no-margin"},"profile",-1),he={class:"no-margin"},Ce={class:"row"},fe={class:"col"},ve=(0,o.createElementVNode)("h6",{class:"no-margin text-center"},"Information",-1),Ve=(0,o.createElementVNode)("div",{class:"small"},"Full Name",-1),Ne={class:"no-margin"},ke=(0,o.createElementVNode)("div",{class:"small"},"Location",-1),ye={class:"no-margin"},_e={class:"col"},we=(0,o.createElementVNode)("h6",{class:"no-margin text-center"},"Contact",-1),xe={class:"row"},Ee=(0,o.createElementVNode)("div",{class:"small"},"Email",-1),be={class:"no-margin"},qe=(0,o.createElementVNode)("div",{class:"small"},"Telegram",-1),Se={class:"no-margin"},Be={class:"row justify-center"},Ze=(0,o.createElementVNode)("div",{class:"col-auto"},[(0,o.createElementVNode)("h5",{class:"q-mb-sm"},"Introduction")],-1),Ie={class:"q-ma-md"},Te={class:"no-margin"},Ue={key:1},Qe={class:"row justify-center full-width q-pa-md"},Ae={class:"col-auto"},$e={class:"no-margin text-center"},De={class:"row q-pa-md"},Pe={class:"no-margin"};function ze(e,t,a,n,i,s){const c=(0,o.resolveComponent)("q-btn"),l=(0,o.resolveComponent)("q-img"),d=(0,o.resolveComponent)("q-avatar"),r=(0,o.resolveComponent)("q-tab"),m=(0,o.resolveComponent)("q-tabs"),g=(0,o.resolveComponent)("q-separator"),p=(0,o.resolveComponent)("q-tab-panel"),u=(0,o.resolveComponent)("q-tab-panels"),h=(0,o.resolveComponent)("q-circular-progress"),C=(0,o.resolveComponent)("q-card");return e.profile?((0,o.openBlock)(),(0,o.createBlock)(C,{key:0,style:{"min-width":"200px"}},{default:(0,o.withCtx)((()=>[e.closeBtn?((0,o.openBlock)(),(0,o.createElementBlock)("div",ie,[(0,o.createElementVNode)("div",se,[(0,o.createVNode)(c,{icon:"close",color:"red",round:"",flat:"",size:"xl",style:{"z-index":"100"},onClick:t[0]||(t[0]=t=>e.$emit("close"))})])])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",ce,[(0,o.createVNode)(l,{src:`https://picsum.photos/seed/${e.profile.cand}/600/200`,style:{"min-height":"250px"}},null,8,["src"])]),(0,o.createElementVNode)("div",le,[(0,o.createVNode)(d,{class:"absolute-center",size:"200px"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("img",{src:"https://i.pravatar.cc/100/?u="+e.profile.cand},null,8,de)])),_:1})]),(0,o.createElementVNode)("div",re,[(0,o.createElementVNode)("div",me,[(0,o.createElementVNode)("h4",ge,(0,o.toDisplayString)(e.profile.cand),1)])]),(0,o.createElementVNode)("div",pe,[(0,o.createVNode)(m,{class:"full-width",modelValue:e.currentTab,"onUpdate:modelValue":t[1]||(t[1]=t=>e.currentTab=t),size:"xl","active-bg-color":"primary","active-color":"white",align:"justify","indicator-color":"transparent"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(r,{name:"profile"},{default:(0,o.withCtx)((()=>[ue])),_:1}),(0,o.createVNode)(r,{name:"reputation"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("h5",he,"reputation: "+(0,o.toDisplayString)(e.profile.rep),1)])),_:1})])),_:1},8,["modelValue"]),(0,o.createVNode)(g),(0,o.createVNode)(u,{modelValue:e.currentTab,"onUpdate:modelValue":t[2]||(t[2]=t=>e.currentTab=t),animated:""},{default:(0,o.withCtx)((()=>[e.fakeProfile?((0,o.openBlock)(),(0,o.createBlock)(p,{key:0,name:"profile"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",Ce,[(0,o.createElementVNode)("div",fe,[ve,Ve,(0,o.createElementVNode)("h5",Ne,(0,o.toDisplayString)(e.fakeProfile.name.first)+" "+(0,o.toDisplayString)(e.fakeProfile.name.last),1),ke,(0,o.createElementVNode)("h5",ye,(0,o.toDisplayString)(e.fakeProfile.location.country),1)]),(0,o.createElementVNode)("div",_e,[we,(0,o.createElementVNode)("div",xe,[Ee,(0,o.createElementVNode)("h5",be,(0,o.toDisplayString)(e.fakeProfile.email),1)]),qe,(0,o.createElementVNode)("h5",Se,"@"+(0,o.toDisplayString)(e.fakeProfile.login.username),1)])]),(0,o.createElementVNode)("div",Be,[Ze,(0,o.createElementVNode)("div",Ie,[(0,o.createElementVNode)("h6",Te,(0,o.toDisplayString)(e.lorem),1)])])])),_:1})):(0,o.createCommentVNode)("",!0)])),_:1},8,["modelValue"])]),"reputation"===e.currentTab?((0,o.openBlock)(),(0,o.createElementBlock)("div",Ue,[(0,o.createElementVNode)("div",Qe,[(0,o.createElementVNode)("div",Ae,[(0,o.createElementVNode)("h3",$e,(0,o.toDisplayString)(e.profile.rep),1),(0,o.createVNode)(h,{class:"q-ma-xs",value:e.profile.rep,size:"235px",thickness:.5,color:e.profile.repColor,"track-color":"grey","center-color":"white"},null,8,["value","color"])])]),(0,o.createElementVNode)("div",De,[(0,o.createElementVNode)("h6",Pe,(0,o.toDisplayString)(e.lorem),1)])])):(0,o.createCommentVNode)("",!0)])),_:1})):(0,o.createCommentVNode)("",!0)}const Fe=(0,o.defineComponent)({data(){return{currentTab:"profile",fakeProfile:null,lorem:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."}},props:["profile","closeBtn"],watch:{profile:{immediate:!0,async handler(e){e&&(this.fakeProfile=(await this.$axios.get("https://randomuser.me/api/?seed="+this.profile.cand)).data.results[0])}}}});var je=a(24152),Le=a(75096),Ge=a(57547),Me=a(58408),Oe=a(5906),Re=a(86602),Ye=a(86122);const He=(0,_.Z)(Fe,[["render",ze]]),Je=He;T()(Fe,"components",{QCard:w.Z,QBtn:B.Z,QImg:je.Z,QAvatar:Le.Z,QTabs:Ge.Z,QTab:Me.Z,QSeparator:te.Z,QTabPanels:Oe.Z,QTabPanel:Re.Z,QCircularProgress:Ye.Z});const Ke=(0,o.defineComponent)({name:"listCandidates",components:{profilePic:N.Z,candidate:ne,candidateProfile:Je},data(){return{searchfilter:""}},computed:{...(0,g.Se)({getElectionsContract:"elections/getElectionsContract",getAccountName:"proton/getAccountName",getUserVotes:"elections/getUserVotes",getElectionsConfig:"elections/getElectionsConfig",getElectionsState:"elections/getElectionsState",getCandidates:"elections/getCandidates"}),candidates(){if(!this.getCandidates)return[];let e=this.getCandidates.filter((e=>1==e.state));return this.searchfilter.length&&(e=e.filter((e=>e.cand.includes(this.searchfilter)))),e.map((e=>{if(this.$set(e,"vote",!1),this.getUserVotes){const t=this.getUserVotes.votes.find((t=>e.cand===t));t&&(e.vote=!0)}return e}))}},methods:{async fetchcandidates(){this.getCandidates||this.$store.dispatch("elections/fetchCandidates",{electionsContract:this.getElectionsContract,vm:this})}},watch:{getElectionsContract:{immediate:!0,handler(e,t){e&&e!=t&&this.fetchcandidates()}}}});var We=a(64689),Xe=a(5363);const et=(0,_.Z)(Ke,[["render",A]]),tt=et;T()(Ke,"components",{QInput:We.Z,QIcon:S.Z,QTooltip:Xe.Z});const at=(0,o.createTextVNode)(" Register as candidate. "),ot={key:0},nt={class:"row justify-end q-mt-md q-pb-xs"};function it(e,t,a,n,i,s){const c=(0,o.resolveComponent)("q-input"),l=(0,o.resolveComponent)("q-btn"),d=(0,o.resolveComponent)("q-card-section"),r=(0,o.resolveComponent)("q-card");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createVNode)(r,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(d,null,{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("p",null,[at,e.getcandidateStakeConfig.amount>0?((0,o.openBlock)(),(0,o.createElementBlock)("span",ot,"You need to lockup a minimum of "+(0,o.toDisplayString)(e.getcandidateStakeConfig.quantity)+" to be eligible for registration.",1)):(0,o.createCommentVNode)("",!0)]),e.getcandidateStakeConfig.amount>0?((0,o.openBlock)(),(0,o.createBlock)(c,{key:0,modelValue:e.quantity,"onUpdate:modelValue":t[0]||(t[0]=t=>e.quantity=t),type:"number",label:"candidate stake",outlined:""},{append:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.getcandidateStakeConfig.symbol),1)])),_:1},8,["modelValue"])):(0,o.createCommentVNode)("",!0),(0,o.createElementVNode)("div",nt,[(0,o.createVNode)(l,{label:"register",color:"primary",onClick:e.regCand,loading:e.is_registering},null,8,["onClick","loading"])])])),_:1}),(0,o.createTextVNode)(" candidate "+(0,o.toDisplayString)(e.getIsCandidate)+" stakes: "+(0,o.toDisplayString)(e.getUserStakes)+" "+(0,o.toDisplayString)(e.getcandidateStakeConfig),1)])),_:1})])}var st=a(40019);const ct=(0,o.defineComponent)({name:"registerCandidate",components:{},data(){return{quantity:"",is_registering:!1}},computed:{...(0,g.Se)({getAccountName:"proton/getAccountName",getIsCandidate:"elections/getIsCandidate",getUserStakes:"elections/getUserStakes",getElectionsContract:"elections/getElectionsContract",getcandidateStakeConfig:"elections/getcandidateStakeConfig"})},methods:{async regCand(){this.is_registering=!0;let e=0;e=e.toFixed(this.getcandidateStakeConfig.precision)+" "+this.getcandidateStakeConfig.symbol;let t={account:this.getElectionsContract,name:"openstake",data:{member:this.getAccountName,stakeasset:{contract:this.getcandidateStakeConfig.contract,quantity:e}}},a={account:this.getcandidateStakeConfig.contract,name:"transfer",data:{from:this.getAccountName,to:this.getElectionsContract,quantity:this.quantity+" "+this.getcandidateStakeConfig.symbol,memo:"candidate stake"}},o={account:this.getElectionsContract,name:"regcand",data:{account:this.getAccountName}},n=[];n.push(t),n.push(a),n.push(o);let i=await this.$store.dispatch("proton/transact",{actions:n,disable_signing_overlay:!0});i&&i.trxid&&(st.log("add candidate"),this.$store.commit("elections/addCandidate",this.getAccountName),this.$emit("navigate","manage candidacy")),this.is_registering=!1},async fetchUserStakes(){!this.getUserStakes&&this.getAccountName&&await this.$store.dispatch("elections/fetchUserStakes",{vm:this})}},mounted(){},watch:{getAccountName:{immediate:!0,handler(e,t){e?e!=t&&this.fetchUserStakes():this.$store.commit("elections/setUserStakes",!1)}},quantity:function(e,t){""!=e&&(this.quantity=Number(this.quantity).toFixed(this.getcandidateStakeConfig.precision))}}}),lt=(0,_.Z)(ct,[["render",it]]),dt=lt;T()(ct,"components",{QCard:w.Z,QCardSection:x.Z,QInput:We.Z,QBtn:B.Z});const rt={class:"row items-center"},mt=(0,o.createTextVNode)("Candidate since"),gt=(0,o.createTextVNode)("My stake"),pt=(0,o.createTextVNode)("My votes"),ut=(0,o.createTextVNode)("My pay"),ht={class:"row justify-end q-mt-md q-pb-xs"};function Ct(e,t,a,n,i,s){const c=(0,o.resolveComponent)("q-item-label"),l=(0,o.resolveComponent)("date-string"),d=(0,o.resolveComponent)("q-item-section"),r=(0,o.resolveComponent)("q-item"),m=(0,o.resolveComponent)("update-pay"),g=(0,o.resolveComponent)("q-btn"),p=(0,o.resolveComponent)("q-card-section"),u=(0,o.resolveComponent)("q-card");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createVNode)(u,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p,null,{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",rt,[(0,o.createVNode)(r,{class:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(d,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(c,null,{default:(0,o.withCtx)((()=>[mt])),_:1}),(0,o.createVNode)(c,{caption:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(l,{date:e.getIsCandidate.registered},null,8,["date"])])),_:1})])),_:1})])),_:1}),(0,o.createVNode)(r,{class:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(d,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(c,null,{default:(0,o.withCtx)((()=>[gt])),_:1}),e.getUserCandidateStake?((0,o.openBlock)(),(0,o.createBlock)(c,{key:0,caption:""},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.getUserCandidateStake.quantity),1)])),_:1})):(0,o.createCommentVNode)("",!0)])),_:1})])),_:1}),(0,o.createVNode)(r,{class:""},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(d,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(c,null,{default:(0,o.withCtx)((()=>[pt])),_:1}),(0,o.createVNode)(c,{caption:""},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.getIsCandidate.total_votes),1)])),_:1})])),_:1})])),_:1}),e.getElectionsConfig&&parseFloat(e.getElectionsConfig.max_pay.quantity)?((0,o.openBlock)(),(0,o.createBlock)(r,{key:0},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(d,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(c,null,{default:(0,o.withCtx)((()=>[ut])),_:1}),(0,o.createVNode)(c,{caption:""},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.getIsCandidate.pay.quantity),1)])),_:1})])),_:1})])),_:1})):(0,o.createCommentVNode)("",!0)]),(0,o.createElementVNode)("div",null,[(0,o.createVNode)(m)]),(0,o.createElementVNode)("div",ht,[(0,o.createVNode)(g,{label:1==e.getIsCandidate.state?"pause campaign":"resume campaign",color:"primary",onClick:e.pauseCampaign,loading:e.is_pausing,class:"q-ml-md"},null,8,["label","onClick","loading"]),(0,o.createVNode)(g,{label:"unregister",color:"primary",onClick:e.unregCand,class:"q-ml-md",loading:e.is_unregistering},null,8,["onClick","loading"])])])),_:1})])),_:1})])}function ft(e,t,a,n,i,s){const c=(0,o.resolveComponent)("q-btn"),l=(0,o.resolveComponent)("q-input");return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[(0,o.createVNode)(l,{disable:parseFloat(e.getElectionsConfig.max_pay.quantity)<=0,outlined:"",type:"number",ref:"newpay",label:"update pay","bottom-slots":"",modelValue:e.new_pay,"onUpdate:modelValue":t[0]||(t[0]=t=>e.new_pay=t),rules:[e.validateNewPay]},{append:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(e.getElectionsConfig.max_pay.quantity.split(" ")[1]),1)])),after:(0,o.withCtx)((()=>[(0,o.createVNode)(c,{label:"update",color:"primary",loading:e.is_updating,disabled:!e.can_update_pay,onClick:e.updatePay},null,8,["loading","disabled","onClick"])])),_:1},8,["disable","modelValue","rules"])])}a(10071);const vt=(0,o.defineComponent)({name:"updatePay",data(){return{new_pay:"",is_updating:!1,is_validated:!1}},computed:{...(0,g.Se)({getAccountName:"proton/getAccountName",getUserStakes:"elections/getUserStakes",getElectionsContract:"elections/getElectionsContract",getcandidateStakeConfig:"elections/getcandidateStakeConfig",getIsCandidate:"elections/getIsCandidate",getUserCandidateStake:"elections/getUserCandidateStake",getElectionsConfig:"elections/getElectionsConfig"}),can_update_pay(){if(parseFloat(this.new_pay)!=parseFloat(this.getIsCandidate.pay.quantity)&&this.is_validated)return!0}},methods:{async updatePay(){this.is_updating=!0;let e={account:this.getElectionsContract,name:"updatepay",data:{candidate:this.getAccountName,new_pay:{contract:this.getElectionsConfig.max_pay.contract,quantity:this.new_pay+" "+this.getElectionsConfig.max_pay.quantity.split(" ")[1]}}},t=await this.$store.dispatch("proton/transact",{actions:[e],disable_signing_overlay:!0});t&&t.trxid&&this.$store.commit("elections/updateCandidatePay",{cand:this.getAccountName,new_pay:e.data.new_pay}),this.is_updating=!1},validateNewPay(e){return e<=parseFloat(this.getElectionsConfig.max_pay.quantity)?(this.is_validated=!0,!0):(this.is_validated=!1,`must be smaller then max pay ${this.getElectionsConfig.max_pay.quantity}`)}},mounted(){this.new_pay=parseFloat(this.getIsCandidate.pay.quantity)},watch:{new_pay:function(e,t){let[a,o]=this.getElectionsConfig.max_pay.quantity.split(" "),n=a.split(".")[1],i=n?n.length:0;this.new_pay=Number(this.new_pay).toFixed(i)}}}),Vt=(0,_.Z)(vt,[["render",ft]]),Nt=Vt;T()(vt,"components",{QInput:We.Z,QBtn:B.Z});const kt=(0,o.defineComponent)({name:"manageCandidacy",components:{dateString:H.Z,updatePay:Nt},data(){return{is_pausing:!1,is_unregistering:!1}},computed:{...(0,g.Se)({getAccountName:"proton/getAccountName",getIsCandidate:"elections/getIsCandidate",getUserStakes:"elections/getUserStakes",getElectionsContract:"elections/getElectionsContract",getcandidateStakeConfig:"elections/getcandidateStakeConfig",getUserCandidateStake:"elections/getUserCandidateStake",getElectionsConfig:"elections/getElectionsConfig"})},methods:{async unregCand(){this.is_unregistering=!0;let e={account:this.getElectionsContract,name:"unregcand",data:{candidate:this.getAccountName}},t=[e],a=await this.$store.dispatch("proton/transact",{actions:t,disable_signing_overlay:!0});a&&a.trxid&&(this.$store.commit("elections/removeCandidate",this.getAccountName),this.$emit("navigate","register candidacy")),this.is_unregistering=!1},async pauseCampaign(){this.is_pausing=!0;let e=1==this.getIsCandidate.state,t={account:this.getElectionsContract,name:"pausecampaig",data:{candidate:this.getAccountName,paused:e}},a=[t],o=await this.$store.dispatch("proton/transact",{actions:a,disable_signing_overlay:!0});o&&o.trxid&&this.$store.commit("elections/togglePauseCampaign",this.getAccountName),this.is_pausing=!1},async fetchUserStakes(){!this.getUserStakes&&this.getAccountName&&await this.$store.dispatch("elections/fetchUserStakes",{vm:this})}},mounted(){},watch:{getAccountName:{immediate:!0,handler(e,t){e?e!=t&&this.fetchUserStakes():this.$store.commit("elections/setUserStakes",!1)}}}}),yt=(0,_.Z)(kt,[["render",Ct]]),_t=yt;T()(kt,"components",{QCard:w.Z,QCardSection:x.Z,QItem:E.Z,QItemSection:b.Z,QItemLabel:q.Z,QBtn:B.Z});const wt=(0,o.defineComponent)({name:"vote",components:{pageHeader:p.Z,listUserVotes:Q,listCandidates:tt,registerCandidate:dt,manageCandidacy:_t},data(){return{selected_tab:"vote"}},computed:{...(0,g.Se)({getAccountName:"proton/getAccountName",getElectionsContract:"elections/getElectionsContract",getElectionsConfig:"elections/getElectionsConfig",getElectionsState:"elections/getElectionsState",getIsCandidate:"elections/getIsCandidate",getIsMember:"user/getIsMember",getActiveGroup:"group/getActiveGroup"})},methods:{},mounted(){},watch:{getElectionsContract:{immediate:!0,handler(e,t){e&&this.$store.dispatch("elections/loadElectionsRoutine",{vm:this})}}}});var xt=a(24379),Et=a(69721);const bt=(0,_.Z)(wt,[["render",m]]),qt=bt;T()(wt,"components",{QPage:xt.Z,QTabs:Ge.Z,QTab:Me.Z,QBadge:Et.Z})}}]);