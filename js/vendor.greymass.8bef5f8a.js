"use strict";(self["webpackChunkthedaoscapefrontend"]=self["webpackChunkthedaoscapefrontend"]||[]).push([[9645],{43419:(t,e,r)=>{r.d(e,{$e:()=>ut,AQ:()=>xt,AU:()=>lt,Ir:()=>dt,Jj:()=>_,MX:()=>pt,Nz:()=>x,Pc:()=>jt,V5:()=>Ht,V9:()=>b,VG:()=>mt,W4:()=>k,WU:()=>ce,YW:()=>Xt,_A:()=>D,_q:()=>Rt,aU:()=>Zt,dL:()=>At,ei:()=>de,f1:()=>ee,j8:()=>V,ln:()=>ot,nh:()=>Vt,uQ:()=>te,xH:()=>T,zM:()=>C});var i=r(56370),n=r.n(i),o=r(46251),s=r(76250),a=r.n(s),c=r(14306),d=r(28430),l=r(40019);
/**
 * EOSIO Core v0.6.9
 * https://github.com/greymass/eosio-core
 *
 * @license
 * Copyright (c) 2020 FFF00 Agents AB & Greymass Inc. All Rights Reserved.
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 *  1. Redistribution of source code must retain the above copyright notice, this
 *     list of conditions and the following disclaimer.
 * 
 *  2. Redistribution in binary form must reproduce the above copyright notice,
 *     this list of conditions and the following disclaimer in the documentation
 *     and/or other materials provided with the distribution.
 * 
 *  3. Neither the name of the copyright holder nor the names of its contributors
 *     may be used to endorse or promote products derived from this software without
 *     specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
 * OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 * YOU ACKNOWLEDGE THAT THIS SOFTWARE IS NOT DESIGNED, LICENSED OR INTENDED FOR USE
 * IN THE DESIGN, CONSTRUCTION, OPERATION OR MAINTENANCE OF ANY MILITARY FACILITY.
 */
function p(t,e){const r=t.length;if(r!==e.length)return!1;for(let i=0;i<r;i++)if(t[i]!==e[i])return!1;return!0}function u(t,e){const r=t.length;if(r!==e.length)return!1;for(let i=0;i<r;i++)if(!t[i].equals(e[i]))return!1;return!0}const h={};function f(){h.enc=new Array(255),h.dec={};for(let t=0;t<=255;++t){const e=t.toString(16).padStart(2,"0");h.enc[t]=e,h.dec[e]=t}}function y(t){h.enc||f();const e=t.length,r=new Array(e);for(let i=0;i<e;++i)r[i]=h.enc[t[i]];return r.join("")}function g(t){if(h.dec||f(),"string"!==typeof t)throw new Error("Expected string containing hex digits");if(t.length%2)throw new Error("Odd number of hex digits");t=t.toLowerCase();const e=t.length/2,r=new Uint8Array(e);for(let i=0;i<e;i++){const e=h.dec[t[2*i]+t[2*i+1]];if(void 0===e)throw new Error("Expected hex string");r[i]=e}return r}function m(t){return n()(t)}let v=!1;function b(t,e){if(t instanceof e)return!0;if(null==t||"object"!==typeof t)return!1;const r=e["__className"]||e["abiName"];if(!r)return!1;let i=t.constructor,n=!1;while(i&&!n){const t=i["__className"]||i["abiName"];if(!t)break;n=r==t,i=Object.getPrototypeOf(i)}return n&&!v&&(l.warn(`Detected alien instance of ${r}, this usually means more than one version of @greymass/eosio has been included in your bundle.`),v=!0),n}class _{static from(t,e){return b(t,this)?t:"string"===typeof t?this.fromString(t,e):ArrayBuffer.isView(t)?new this(new Uint8Array(t.buffer,t.byteOffset,t.byteLength)):b(t["array"],Uint8Array)?new this(t["array"]):new this(new Uint8Array(t))}static fromString(t,e="hex"){if("hex"===e){const e=g(t);return new this(e)}if("utf8"==e){const e=new TextEncoder;return new this(e.encode(t))}throw new Error(`Unknown encoding: ${e}`)}static fromABI(t){const e=t.readVaruint32();return new this(t.readArray(e))}static abiDefault(){return new _}static equal(t,e){return this.from(t).equals(this.from(e))}static random(t){return new this(m(t))}static isBytes(t){return!(!b(t,_)&&!b(t,Uint8Array))||(!(!Array.isArray(t)||!t.every((t=>"number"===typeof t)))||!("string"!==typeof t||!/[\da-f]/i.test(t)&&""!==t))}constructor(t=new Uint8Array){this.array=t}get length(){return this.array.byteLength}get hexString(){return y(this.array)}get utf8String(){return(new TextDecoder).decode(this.array)}append(t){t=_.from(t);const e=this.array.byteLength+t.array.byteLength,r=new ArrayBuffer(e),i=new Uint8Array(r);i.set(this.array),i.set(t.array,this.array.byteLength),this.array=i}appending(t){const e=new _(this.array);return e.append(t),e}zeropad(t,e=!1){const r=e?t:Math.max(t,this.array.byteLength),i=new ArrayBuffer(r),n=new Uint8Array(i);n.fill(0),e&&this.array.byteLength>r?n.set(this.array.slice(0,r),0):n.set(this.array,r-this.array.byteLength),this.array=n}zeropadded(t,e=!1){const r=new _(this.array);return r.zeropad(t,e),r}dropFirst(t=1){this.array=this.array.subarray(t)}droppingFirst(t=1){return new _(this.array.subarray(t))}copy(){const t=new ArrayBuffer(this.array.byteLength),e=new Uint8Array(t);return e.set(this.array),new _(e)}equals(t){return p(this.array,_.from(t).array)}toString(t="hex"){if("hex"===t)return this.hexString;if("utf8"===t)return this.utf8String;throw new Error(`Unknown encoding: ${t}`)}toABI(t){t.writeVaruint32(this.array.byteLength),t.writeArray(this.array)}toJSON(){return this.hexString}}_.abiName="bytes";class w{static from(t){return b(t,this)?t:b(t,w)?new this(t.array):new this(_.from(t).array)}static fromABI(t){return new this(t.readArray(this.byteSize))}static abiDefault(){return new this(new Uint8Array(this.byteSize))}constructor(t){const e=this.constructor.byteSize;if(t.byteLength!==e)throw new Error(`Checksum size mismatch, expected ${e} bytes got ${t.byteLength}`);this.array=t}equals(t){const e=this.constructor;try{return p(this.array,e.from(t).array)}catch{return!1}}get hexString(){return y(this.array)}toABI(t){t.writeArray(this.array)}toString(){return this.hexString}toJSON(){return this.toString()}}w.abiName="__checksum";class x extends w{static from(t){return super.from(t)}static hash(t){const e=new Uint8Array((0,o.sha256)().update(_.from(t).array).digest());return new x(e)}}x.abiName="checksum256",x.byteSize=32;class k extends w{static from(t){return super.from(t)}static hash(t){const e=new Uint8Array((0,o.sha512)().update(_.from(t).array).digest());return new k(e)}}k.abiName="checksum512",k.byteSize=64;class A extends w{static from(t){return super.from(t)}static hash(t){const e=new Uint8Array((0,o.ripemd160)().update(_.from(t).array).digest());return new A(e)}}var S;A.abiName="checksum160",A.byteSize=20,function(t){t["K1"]="K1",t["R1"]="R1",t["WA"]="WA"}(S||(S={})),function(t){function e(e){switch(e){case t.K1:return 0;case t.R1:return 1;case t.WA:return 2;default:throw new Error(`Unknown curve type: ${e}`)}}function r(e){let r;switch(r="number"!==typeof e?t.indexFor(e):e,r){case 0:return t.K1;case 1:return t.R1;case 2:return t.WA;default:throw new Error("Unknown curve type")}}t.indexFor=e,t.from=r}(S||(S={}));class N{static get max(){return new(a())(2).pow(new(a())(8*this.byteWidth-(this.isSigned?1:0))).isubn(1)}static get min(){return this.isSigned?this.max.ineg().isubn(1):new(a())(0)}static add(t,e,r="truncate"){return N.operator(t,e,r,((t,e)=>t.add(e)))}static sub(t,e,r){return N.operator(t,e,r,((t,e)=>t.sub(e)))}static mul(t,e,r){return N.operator(t,e,r,((t,e)=>t.mul(e)))}static div(t,e,r){return N.operator(t,e,r,((t,e)=>{if(e.isZero())throw new Error("Division by zero");return t.div(e)}))}static divRound(t,e,r){return N.operator(t,e,r,((t,e)=>{if(e.isZero())throw new Error("Division by zero");return t.divRound(e)}))}static divCeil(t,e,r){return N.operator(t,e,r,((t,e)=>{if(e.isZero())throw new Error("Division by zero");const r=t.divmod(e);return r.mod.isZero()?r.div:0!==r.div.negative?r.div.isubn(1):r.div.iaddn(1)}))}static operator(t,e,r="truncate",i){const{a:n,b:o}=F(t,e),s=n.constructor,a=i(n.value,o.value);return s.from(a,r)}static from(t,e){if(b(t,this))return t;let r,i=this;if(b(t,N))i=t.constructor,r=t.value.clone();else if(t instanceof Uint8Array)r=new(a())(t,void 0,"le"),i.isSigned&&(r=r.fromTwos(8*i.byteWidth));else{if("string"===typeof t&&!/[0-9]+/.test(t)||"number"===typeof t&&!Number.isFinite(t))throw new Error("Invalid number");r=a().isBN(t)?t.clone():new(a())(t,10),r.isNeg()&&!i.isSigned&&(i={byteWidth:i.byteWidth,isSigned:!0})}switch(e){case"clamp":r=$(r,this.min,this.max);break;case"truncate":r=L(r,i,this);break}return new this(r)}static fromABI(t){return this.from(t.readArray(this.byteWidth))}static abiDefault(){return this.from(0)}static random(){return this.from(m(this.byteWidth))}constructor(t){const e=this.constructor;if(void 0===e.isSigned||void 0===e.byteWidth)throw new Error("Cannot instantiate abstract class Int");if(t.gt(e.max))throw new Error(`Number ${t} overflows ${e.abiName}`);if(t.lt(e.min))throw new Error(`Number ${t} underflows ${e.abiName}`);this.value=t}cast(t,e="truncate"){return this.constructor===t?this:t.from(this,e)}get byteArray(){const t=this.constructor,e=t.isSigned?this.value.toTwos(8*t.byteWidth):this.value;return e.toArrayLike(Uint8Array,"le",t.byteWidth)}equals(t,e=!1){const r=this.constructor;if(!0===e&&b(t,N)){const e=t.constructor;if(r.byteWidth!==e.byteWidth||r.isSigned!==e.isSigned)return!1}try{return this.value.eq(r.from(t).value)}catch{return!1}}add(t){this.value=this.operator(t,N.add).value}adding(t){return this.operator(t,N.add)}subtract(t){this.value=this.operator(t,N.sub).value}subtracting(t){return this.operator(t,N.sub)}multiply(t){this.value=this.operator(t,N.mul).value}multiplying(t){return this.operator(t,N.mul)}divide(t,e){this.value=this.dividing(t,e).value}dividing(t,e){let r=N.div;switch(e){case"ceil":r=N.divCeil;break;case"round":r=N.divRound;break}return this.operator(t,r)}operator(t,e){let r;return r=b(t,N)?t:P.from(t,"truncate"),e(this,r).cast(this.constructor)}toNumber(){return this.value.toNumber()}toString(){return this.value.toString()}[Symbol.toPrimitive](t){return"number"===t?this.toNumber():this.toString()}toABI(t){t.writeArray(this.byteArray)}toJSON(){return this.value.bitLength()>32?this.value.toString():this.value.toNumber()}}N.abiName="__int";class I extends N{}I.abiName="int8",I.byteWidth=1,I.isSigned=!0;class E extends N{}E.abiName="int16",E.byteWidth=2,E.isSigned=!0;class B extends N{}B.abiName="int32",B.byteWidth=4,B.isSigned=!0;class P extends N{}P.abiName="int64",P.byteWidth=8,P.isSigned=!0;class U extends N{}U.abiName="int128",U.byteWidth=16,U.isSigned=!0;class D extends N{}D.abiName="uint8",D.byteWidth=1,D.isSigned=!1;class V extends N{}V.abiName="uint16",V.byteWidth=2,V.isSigned=!1;class T extends N{}T.abiName="uint32",T.byteWidth=4,T.isSigned=!1;class C extends N{}C.abiName="uint64",C.byteWidth=8,C.isSigned=!1;class W extends N{}W.abiName="uint128",W.byteWidth=16,W.isSigned=!1;class q extends N{static fromABI(t){return new this(new(a())(t.readVarint32()))}toABI(t){t.writeVarint32(Number(this))}}q.abiName="varint32",q.byteWidth=32,q.isSigned=!0;class j extends N{static fromABI(t){return new this(new(a())(t.readVaruint32()))}toABI(t){t.writeVaruint32(Number(this))}}function $(t,e,r){return a().min(a().max(t,e),r)}function L(t,e,r){const i=t.isNeg()?255:0,n=e.isSigned?t.toTwos(8*e.byteWidth):t,o=n.toArrayLike(Uint8Array,"le"),s=new Uint8Array(r.byteWidth);s.fill(i),s.set(o.slice(0,r.byteWidth));const c=new(a())(s,void 0,"le");return r.isSigned?c.fromTwos(8*r.byteWidth):c}function F(t,e){t=M(t),e=M(e);const r=t.constructor,i=e.constructor;return r!==i&&(r.isSigned===i.isSigned?r.byteWidth>i.byteWidth?e=e.cast(r):i.byteWidth>r.byteWidth&&(t=t.cast(i)):!1===r.isSigned&&r.byteWidth>=i.byteWidth?e=e.cast(r):!1===i.isSigned&&i.byteWidth>=r.byteWidth?t=t.cast(i):!0===r.isSigned&&r.max.gte(i.max)&&r.min.lte(i.min)?e=e.cast(r):!0===i.isSigned&&i.max.gte(r.max)&&i.min.lte(r.min)&&(t=t.cast(i))),{a:t,b:e}}function M(t){let e=t;const r=t.constructor;return r.byteWidth<4&&(e=t.cast(B)),e}function O(t){const e=[],r=[],i=[],n=new Set,o=t=>{let e;return e="string"!==typeof t.type?s(t.type):t.type,!0===t.array&&(e+="[]"),!0===t.optional&&(e+="?"),!0===t.extension&&(e+="$"),e},s=t=>{if(!t.abiName)throw new Error("Encountered non-conforming type");if("__struct"===t.abiName)throw new Error("Misconfigured Struct subclass, did you forget @Struct.type?");if(n.has(t))return t.abiName;if(n.add(t),t.abiAlias)i.push({new_type_name:t.abiName,type:o(t.abiAlias)});else if(t.abiFields){const r=t.abiFields.map((t=>({name:t.name,type:o(t)}))),i={base:t.abiBase?s(t.abiBase):"",name:t.abiName,fields:r};e.push(i)}else if(t.abiVariant){const e={name:t.abiName,types:t.abiVariant.map(o)};r.push(e)}return t.abiName},a=s(t);return{abi:At.from({structs:e,variants:r,types:i}),types:Array.from(n),root:a}}function R(t){let e="string"===typeof t.type?t.type:t.type.abiName;return!0===t.array&&(e+="[]"),!0===t.optional&&(e+="?"),!0===t.extension&&(e+="$"),e}function z(t){return"string"!==typeof t&&void 0===t.abiName&&void 0!==t.type}function J(t){return"string"===typeof t||"undefined"!==typeof t.abiName?{type:t}:t}j.abiName="varuint32",j.byteWidth=32,j.isSigned=!1;const H={abiName:"string",abiDefault:()=>"",fromABI:t=>t.readString(),from:t=>t,toABI:(t,e)=>{e.writeString(t)}},K={abiName:"bool",abiDefault:()=>!1,fromABI:t=>1===t.readByte(),from:t=>t,toABI:(t,e)=>{e.writeByte(!0===t?1:0)}};function Z(){return[K,H,St,St.Symbol,St.SymbolCode,kt,_,A,x,k,Nt,gt,ft,yt,U,E,B,P,I,mt,Vt,jt,wt,xt,W,V,T,C,D,q,j]}function G(t=[]){const e={},r=Z();for(const i of r)e[i.abiName]=i;for(const i of t){if(!i.abiName)throw new Error("Invalid type");e[i.abiName]=i}return e}function Y(t){if(t.constructor&&void 0!==t.constructor.abiName)return t.constructor.abiName;if(Array.isArray(t)){const e=t.map(Y),r=e[0];if(!r||!e.every((t=>t===r)))return;return r+"[]"}switch(typeof t){case"boolean":return"bool";case"string":return"string"}}function Q(t,e="jsobj"){var r;if(t.constructor&&void 0!==t.constructor.abiName)return t.constructor;if(Array.isArray(t)){const r=t.map((t=>Q(t,e))),i=r[0];if(!i)return;if(!r.every((t=>t&&t.abiName===i.abiName)))return;return i}const i=typeof t;if("object"===i&&null!==t){const i=Object.keys(t).map((r=>({name:r,type:Q(t[r],e+"_nested")})));if(i.find((t=>!t.type)))return;return r=class extends lt{},r.abiName=e,r.abiFields=i,r}switch(i){case"boolean":return K;case"string":return H}}class X extends Error{constructor(t,e){const r=t.codingPath.map((({field:t,type:e})=>"number"===typeof t?t:`${t}<${e.typeName}>`)).join(".");super(`Decoding error at ${r}: ${e.message}`),this.stack=e.stack,this.ctx=t,this.underlyingError=e}}function tt(t){const e=J(t.type),r=R(e),i=t.customTypes||[];let n;if(t.abi)n=At.from(t.abi);else try{let t;if("string"===typeof e.type){const r=G(i),n=new At.ResolvedType(e.type).name;if(t=r[n],!t)throw new Error(`Unknown type: ${e.type}`)}else t=e.type;const r=O(t);n=r.abi,i.push(...r.types)}catch(a){throw Error(`Unable to synthesize ABI for: ${r} (${a.message}). To decode non-class types you need to pass the ABI definition manually.`)}const o=n.resolveType(r);"string"!==typeof e.type&&i.unshift(e.type);const s={types:G(i),strictExtensions:t.strictExtensions||!1,codingPath:[{field:"root",type:o}]};try{if(t.data||""===t.data){let e;if(b(t.data,ot))e=t.data;else{const r=_.from(t.data);e=new ot(r.array)}return t.metadata&&(e.metadata=t.metadata),rt(o,e,s)}if(void 0!==t.object)return it(t.object,o,s);if(t.json)return it(JSON.parse(t.json),o,s);throw new Error("Nothing to decode, you must set one of data, json, object")}catch(a){throw new X(s,a)}}X.__className="DecodingError";const et=Symbol("Resolved");function rt(t,e,r){if(r.codingPath.length>32)throw new Error("Maximum decoding depth exceeded");if(t.isExtension&&!e.canRead())return r.strictExtensions?nt(t,r):null;if(t.isOptional&&0===e.readByte())return null;if(t.isArray){const n=e.readVaruint32(),o=[];for(let e=0;e<n;e++)r.codingPath.push({field:e,type:t}),o.push(i()),r.codingPath.pop();return o}return i();function i(){const i=r.types[t.name];if(i&&i.fromABI)return i.fromABI(e);if(t.ref){r.codingPath.push({field:"",type:t.ref});const i=rt(t.ref,e,r);return r.codingPath.pop(),i}if(t.fields){const n=t.allFields;if(!n)throw new Error("Invalid struct fields");const o={};for(const t of n)r.codingPath.push({field:t.name,type:t.type}),o[t.name]=rt(t.type,e,r),r.codingPath.pop();return i?(o[et]=!0,i.from(o)):o}if(t.variant){const n=e.readByte(),o=t.variant[n];if(!o)throw new Error(`Unknown variant idx: ${n}`);r.codingPath.push({field:`v${n}`,type:o});const s=[o.typeName,rt(o,e,r)];return r.codingPath.pop(),i?i.from(s):s}throw i?new Error("Invalid type"):new Error("any"===t.name?"Unable to decode 'any' type from binary":"Unknown type")}}function it(t,e,r){if(null===t||void 0===t){if(e.isOptional)return null;if(e.isExtension)return r.strictExtensions?nt(e,r):null;throw new Error(`Unexpectedly encountered ${t} for non-optional`)}if(e.isArray){if(!Array.isArray(t))throw new Error("Expected array");const n=[],o=t.length;for(let s=0;s<o;s++)r.codingPath.push({field:s,type:e}),n.push(i(t[s])),r.codingPath.pop();return n}return i(t);function i(t){const i=r.types[e.name];if(e.ref&&!i)return it(t,e.ref,r);if(e.fields){if("object"!==typeof t)throw new Error("Expected object");if("function"===typeof i&&b(t,i))return t;const n=e.allFields;if(!n)throw new Error("Invalid struct fields");const o={};for(const e of n)r.codingPath.push({field:e.name,type:e.type}),o[e.name]=it(t[e.name],e.type,r),r.codingPath.pop();return i?(o[et]=!0,i.from(o)):o}if(e.variant){let n;Array.isArray(t)&&2===t.length&&"string"===typeof t[0]?(n=t[0],t=t[1]):b(t,ut)?(n=t.variantName,t=t.value):n=Y(t);const o=e.variant.findIndex((t=>t.typeName===n));if(-1===o)throw new Error(`Unknown variant type: ${n}`);const s=e.variant[o];r.codingPath.push({field:`v${o}`,type:s});const a=[s.typeName,it(t,s,r)];return r.codingPath.pop(),i?(a[et]=!0,i.from(a)):a}if(!i){if("any"===e.name)return t;throw new Error("Unknown type")}return i.from(t)}}function nt(t,e,r=new Set){if(t.isArray)return[];if(t.isOptional)return null;const i=e.types[t.name];if(i&&i.abiDefault)return i.abiDefault();if(r.has(t.name))throw new Error("Circular type reference");if(r.add(t.name),t.allFields){const n={};for(const i of t.allFields)e.codingPath.push({field:i.name,type:i.type}),n[i.name]=nt(i.type,e,r),e.codingPath.pop();return i?(n[et]=!0,i.from(n)):n}if(t.variant&&t.variant.length>0){const r=[t.variant[0].typeName,nt(t.variant[0],e)];return i?(r[et]=!0,i.from(r)):r}if(t.ref){e.codingPath.push({field:"",type:t.ref});const i=nt(t.ref,e,r);return e.codingPath.pop(),i}throw new Error("Unable to determine default value")}class ot{constructor(t){this.array=t,this.pos=0,this.textDecoder=new TextDecoder("utf-8",{fatal:!0}),this.metadata={},this.data=new DataView(t.buffer,t.byteOffset,t.byteLength)}canRead(t=1){return!(this.pos+t>this.array.byteLength)}ensure(t){if(!this.canRead(t))throw new Error("Read past end of buffer")}setPosition(t){if(t<0||t>this.array.byteLength)throw new Error("Invalid position");this.pos=t}getPosition(){return this.pos}advance(t){this.ensure(t),this.pos+=t}readByte(){return this.ensure(1),this.array[this.pos++]}readFloat(t){let e;switch(this.ensure(t),t){case 4:e=this.data.getFloat32(this.pos,!0);break;case 8:e=this.data.getFloat64(this.pos,!0);break;default:throw new Error("Invalid float size")}return this.pos+=t,e}readVaruint32(){let t=0,e=0;for(;;){const r=this.readByte();if(t|=(127&r)<<e,e+=7,!(128&r))break}return t>>>0}readVarint32(){const t=this.readVaruint32();return 1&t?~t>>1|2147483648:t>>>1}readArray(t){this.ensure(t);const e=this.array.subarray(this.pos,this.pos+t);return this.pos+=t,e}readString(){const t=this.readVaruint32();return this.textDecoder.decode(this.readArray(t))}}ot.__className="ABIDecoder";class st extends Error{constructor(t,e){const r=t.codingPath.map((({field:t,type:e})=>"number"===typeof t?t:`${t}<${e.typeName}>`)).join(".");super(`Encoding error at ${r}: ${e.message}`),this.stack=e.stack,this.ctx=t,this.underlyingError=e}}function at(t){let e,r;"string"===typeof t.type?r=t.type:t.type&&z(t.type)?("string"!==typeof t.type.type&&(e=t.type.type),r=R(t.type)):t.type&&void 0!==t.type.abiName?(e=t.type,r=t.type.abiName):(e=Q(t.object),e&&(r=e.abiName,Array.isArray(t.object)&&(r+="[]")));const i=t.customTypes?t.customTypes.slice():[];if(e)i.unshift(e);else if(r){const t=new At.ResolvedType(r).name;e=i.find((e=>e.abiName===t))}let n;if(t.abi&&r)n=At.from(t.abi).resolveType(r);else if(e){const t=O(e);n=t.abi.resolveType(r||e.abiName),i.push(...t.types)}else{if(!r)throw new Error("Unable to determine the type of the object to be encoded. To encode custom ABI types you must pass the type argument.");n=new At.ResolvedType(r)}const o=G(i),s=t.encoder||new dt;t.metadata&&(s.metadata=t.metadata);const a={types:o,encoder:s,codingPath:[{field:"root",type:n}]};try{ct(t.object,n,a)}catch(c){throw new st(a,c)}return _.from(s.getData())}function ct(t,e,r){const i=void 0!==t&&null!==t;if(!e.isOptional||(r.encoder.writeByte(i?1:0),i))if(e.isArray){if(!Array.isArray(t))throw new Error(`Expected array for: ${e.typeName}`);const i=t.length;r.encoder.writeVaruint32(i);for(let o=0;o<i;o++)r.codingPath.push({field:o,type:e}),n(t[o]),r.codingPath.pop()}else n(t);function n(t){const n=r.types[e.name];if(!e.ref||n){if(!i){if(e.isExtension)return;throw new Error(`Found ${t} for non-optional type: ${e.typeName}`)}if(n&&n.toABI)n.toABI(t,r.encoder);else if("function"===typeof t.toABI&&t.constructor.abiName===e.name)t.toABI(r.encoder);else if(e.fields){if("object"!==typeof t)throw new Error(`Expected object for: ${e.name}`);const i=e.allFields;if(!i)throw new Error("Invalid struct fields");for(const e of i)r.codingPath.push({field:e.name,type:e.type}),ct(t[e.name],e.type,r),r.codingPath.pop()}else if(e.variant){let i;Array.isArray(t)&&2===t.length&&"string"===typeof t[0]?(i=t[0],t=t[1]):b(t,ut)?(i=t.variantName,t=t.value):i=Y(t);const n=e.variant.findIndex((t=>t.typeName===i));if(-1===n){const t=e.variant.map((t=>`'${t.typeName}'`)).join(", ");throw new Error(`Unknown variant type '${i}', expected one of ${t}`)}const o=e.variant[n];r.encoder.writeVaruint32(n),r.codingPath.push({field:`v${n}`,type:o}),ct(t,o,r),r.codingPath.pop()}else{if(!n)throw new Error("any"===e.name?"Unable to encode any type to binary":"Unknown type");const i=n.from(t);if(!i.toABI)throw new Error(`Invalid type ${e.name}, no encoding methods implemented`);i.toABI(r.encoder)}}else ct(t,e.ref,r)}}st.__className="EncodingError";class dt{constructor(t=1024){this.pageSize=t,this.pos=0,this.textEncoder=new TextEncoder,this.metadata={};const e=new ArrayBuffer(t);this.data=new DataView(e),this.array=new Uint8Array(e)}ensure(t){if(this.data.byteLength>=this.pos+t)return;const e=Math.ceil(t/this.pageSize),r=this.data.byteLength+this.pageSize*e,i=new ArrayBuffer(r),n=new DataView(i),o=new Uint8Array(i);o.set(this.array),this.data=n,this.array=o}writeByte(t){this.ensure(1),this.array[this.pos++]=t}writeArray(t){const e=t.length;this.ensure(e),this.array.set(t,this.pos),this.pos+=e}writeFloat(t,e){switch(this.ensure(e),e){case 4:this.data.setFloat32(this.pos,t,!0);break;case 8:this.data.setFloat64(this.pos,t,!0);break;default:throw new Error("Invalid float size")}this.pos+=e}writeVaruint32(t){for(this.ensure(4);;){if(!(t>>>7)){this.array[this.pos++]=t;break}this.array[this.pos++]=128|127&t,t>>>=7}}writeVarint32(t){this.writeVaruint32(t<<1^t>>31)}writeString(t){const e=this.textEncoder.encode(t);this.writeVaruint32(e.byteLength),this.writeArray(e)}getData(){return new Uint8Array(this.array.buffer,this.array.byteOffset,this.pos)}getBytes(){return new _(this.getData())}}dt.__className="ABIEncoder";class lt{static from(t){return!0===t[et]?new this(t):b(t,this)?t:tt({object:t,type:this})}static get structFields(){const t=[],e=r=>{r.abiBase&&e(r.abiBase);for(const e of r.abiFields||[])t.push(e)};return e(this),t}constructor(t){const e=this.constructor;for(const r of e.structFields)this[r.name]=t[r.name]}equals(t){const e=this.constructor;return(!t.constructor||"string"!==typeof t.constructor.abiName||t.constructor.abiName===e.abiName)&&at({object:this}).equals(at({object:e.from(t)}))}toJSON(){const t=this.constructor,e={};for(const r of t.structFields)e[r.name]=this[r.name];return e}}function pt(t){return function(e){return e.abiAlias={type:Object.getPrototypeOf(e.prototype).constructor},e.abiName=t,e}}lt.abiName="__struct",function(t){const e=Symbol("FieldsOwner");function r(t){return function(e){return e.abiName=t,e}}function i(t,r={}){return(i,n)=>{const o=i.constructor;o.abiFields?o.abiFields[e]!==o&&(o.abiBase=o.abiFields[e],o.abiFields=[],o.abiFields[e]=o):(o.abiFields=[],o.abiFields[e]=o),o.abiFields.push({...r,name:n,type:t})}}t.type=r,t.field=i}(lt||(lt={}));class ut{static from(t){return t[et]?new this(t):b(t,this)?t:tt({object:t,type:this})}constructor(t){const e=this.constructor.abiVariant;this.value=t[1];const r=e.map(R).findIndex((e=>e===t[0]));if(0>r||e.length<=r)throw new Error(`Unknown variant ${t[0]}`);this.variantIdx=r}equals(t){const e=this.constructor,r=e.from(t);return this.variantIdx===r.variantIdx&&at({object:this}).equals(at({object:r}))}get variantName(){const t=this.constructor.abiVariant[this.variantIdx];return R(t)}toJSON(){return[this.variantName,this.value]}}ut.abiName="__variant",ut.abiVariant=[],function(t){function e(t,e){return function(r){return r.abiName=t,r.abiVariant=e.map(J),r}}t.type=e}(ut||(ut={}));class ht{static from(t){return b(t,this)?t:("string"===typeof t?t=Number.parseFloat(t):b(t,ht)&&(t=t.value),new this(t))}static fromABI(t){return new this(t.readFloat(this.byteWidth))}static abiDefault(){return this.from(0)}static random(){const t=m(this.byteWidth),e=new ot(t);return this.fromABI(e)}constructor(t){if(!Number.isFinite(t))throw new Error("Invalid number");this.value=t}equals(t){const e=this.constructor;return this.value===e.from(t).value}toABI(t){const e=this.constructor;t.writeFloat(this.value,e.byteWidth)}toString(){return this.value.toString()}toJSON(){return this.toString()}}ht.abiName="__float";class ft extends ht{toString(){return this.value.toFixed(7)}}ft.abiName="float32",ft.byteWidth=4;class yt extends ht{}yt.abiName="float64",yt.byteWidth=8;class gt{static from(t){return b(t,this)?t:("string"===typeof t&&t.startsWith("0x")&&(t=t.slice(2)),new this(_.from(t)))}static fromABI(t){return new this(new _(t.readArray(this.byteWidth)))}static random(){const t=m(16),e=new ot(t);return this.fromABI(e)}constructor(t){if(16!==t.array.length)throw new Error("Invalid float128");this.data=t}equals(t){const e=this.constructor;return this.data.equals(e.from(t).data)}toABI(t){t.writeArray(this.data.array)}toString(){return"0x"+this.data.hexString}toJSON(){return this.toString()}}gt.abiName="float128",gt.byteWidth=16;class mt{get rawValue(){return this.value}static from(t){if(b(t,mt))return t;if("string"===typeof t)return new mt(vt(t));if(b(t,C))return new mt(t);throw new Error("Invalid name")}static fromABI(t){return new mt(C.fromABI(t))}static abiDefault(){return new this(C.from(0))}constructor(t){this.value=t}equals(t){return this.value.equals(mt.from(t).value)}toString(){return bt(this.value)}toABI(t){this.value.toABI(t)}toJSON(){return this.toString()}}function vt(t){function e(t){return t>="a".charCodeAt(0)&&t<="z".charCodeAt(0)?t-"a".charCodeAt(0)+6:t>="1".charCodeAt(0)&&t<="5".charCodeAt(0)?t-"1".charCodeAt(0)+1:0}const r=new Uint8Array(8);let i=63;for(let n=0;n<t.length;++n){let o=e(t.charCodeAt(n));i<5&&(o<<=1);for(let t=4;t>=0;--t)i>=0&&(r[Math.floor(i/8)]|=(o>>t&1)<<i%8,--i)}return C.from(r)}function bt(t){const e=t.value.toArray("le",8);let r="";for(let i=63;i>=0;){let t=0;for(let r=0;r<5;++r)i>=0&&(t=t<<1|e[Math.floor(i/8)]>>i%8&1,--i);r+=t>=6?String.fromCharCode(t+"a".charCodeAt(0)-6):t>=1?String.fromCharCode(t+"1".charCodeAt(0)-1):"."}while(r.endsWith("."))r=r.substr(0,r.length-1);return r}mt.abiName="name",mt.pattern=/^[a-z1-5.]{0,13}$/;class _t{static from(t){return b(t,this)?t:b(t,_t)?this.fromMilliseconds(t.toMilliseconds()):b(t,Date)?this.fromDate(t):"string"===typeof t?this.fromString(t):this.fromInteger(t)}static fromString(t){const e=Date.parse(t+"Z");if(!Number.isFinite(e))throw new Error("Invalid date string");return this.fromMilliseconds(e)}static fromDate(t){return this.fromMilliseconds(t.getTime())}static abiDefault(){return this.from(0)}toABI(t){const e=this;e.value.toABI(t)}equals(t){const e=this.constructor;return this.toMilliseconds()===e.from(t).toMilliseconds()}toMilliseconds(){throw new Error("Not implemented")}toDate(){return new Date(this.toMilliseconds())}toJSON(){return this.toString()}}_t.abiName="__time_point_base";class wt extends _t{static fromMilliseconds(t){return new this(P.from(Math.round(1e3*t)))}static fromInteger(t){return new this(P.from(t))}static fromABI(t){return new this(P.fromABI(t))}constructor(t){super(),this.value=t}toString(){return this.toDate().toISOString().slice(0,-1)}toMilliseconds(){return Number(this.value.dividing(1e3,"round"))}}wt.abiName="time_point";class xt extends _t{static fromMilliseconds(t){return new this(T.from(Math.round(t/1e3)))}static fromInteger(t){return new this(T.from(t))}static fromABI(t){return new this(T.fromABI(t))}constructor(t){super(),this.value=t}toString(){return this.toDate().toISOString().slice(0,-5)}toMilliseconds(){return Number(this.value.cast(C).multiplying(1e3))}}xt.abiName="time_point_sec";class kt extends _t{static fromMilliseconds(t){return new this(T.from(Math.round((t-9466848e5)/500)))}static fromInteger(t){return new this(T.from(t))}static fromABI(t){return new this(T.fromABI(t))}constructor(t){super(),this.value=t}toString(){return this.toDate().toISOString().slice(0,-1)}toMilliseconds(){return Number(this.value.cast(C).multiplying(500).adding(9466848e5))}}kt.abiName="block_timestamp_type";class At{constructor(t){this.version=t.version||At.version,this.types=t.types||[],this.variants=t.variants||[],this.structs=t.structs||[],this.actions=t.actions||[],this.tables=t.tables||[],this.ricardian_clauses=t.ricardian_clauses||[]}static from(t){return b(t,At)?t:new At("string"===typeof t?JSON.parse(t):t)}static fromABI(t){const e=t.readString(),r=[],i=t.readVaruint32();for(let y=0;y<i;y++)r.push({new_type_name:t.readString(),type:t.readString()});const n=[],o=t.readVaruint32();for(let y=0;y<o;y++){const e=t.readString(),r=t.readString(),i=t.readVaruint32(),o=[];for(let n=0;n<i;n++)o.push({name:t.readString(),type:t.readString()});n.push({base:r,name:e,fields:o})}const s=[],a=t.readVaruint32();for(let y=0;y<a;y++){const e=mt.fromABI(t),r=t.readString(),i=t.readString();s.push({name:e,type:r,ricardian_contract:i})}const c=[],d=t.readVaruint32();for(let y=0;y<d;y++){const e=mt.fromABI(t),r=t.readString(),i=[],n=t.readVaruint32();for(let c=0;c<n;c++)i.push(t.readString());const o=[],s=t.readVaruint32();for(let c=0;c<s;c++)o.push(t.readString());const a=t.readString();c.push({name:e,index_type:r,key_names:i,key_types:o,type:a})}const l=[],p=t.readVaruint32();for(let y=0;y<p;y++){const e=t.readString(),r=t.readString();l.push({id:e,body:r})}const u=t.readVaruint32();for(let y=0;y<u;y++)t.advance(8),t.advance(t.readVaruint32());const h=t.readVaruint32();for(let y=0;y<h;y++)t.advance(2),t.advance(t.readVaruint32());const f=[];if(t.canRead()){const e=t.readVaruint32();for(let r=0;r<e;r++){const e=t.readString(),r=[],i=t.readVaruint32();for(let n=0;n<i;n++)r.push(t.readString());f.push({name:e,types:r})}}return new At({version:e,types:r,structs:n,actions:s,tables:c,ricardian_clauses:l,variants:f})}toABI(t){t.writeString(this.version),t.writeVaruint32(this.types.length);for(const e of this.types)t.writeString(e.new_type_name),t.writeString(e.type);t.writeVaruint32(this.structs.length);for(const e of this.structs){t.writeString(e.name),t.writeString(e.base),t.writeVaruint32(e.fields.length);for(const r of e.fields)t.writeString(r.name),t.writeString(r.type)}t.writeVaruint32(this.actions.length);for(const e of this.actions)mt.from(e.name).toABI(t),t.writeString(e.type),t.writeString(e.ricardian_contract);t.writeVaruint32(this.tables.length);for(const e of this.tables){mt.from(e.name).toABI(t),t.writeString(e.index_type),t.writeVaruint32(e.key_names.length);for(const r of e.key_names)t.writeString(r);t.writeVaruint32(e.key_types.length);for(const r of e.key_types)t.writeString(r);t.writeString(e.type)}t.writeVaruint32(this.ricardian_clauses.length);for(const e of this.ricardian_clauses)t.writeString(e.id),t.writeString(e.body);t.writeVaruint32(0),t.writeVaruint32(0),t.writeVaruint32(this.variants.length);for(const e of this.variants){t.writeString(e.name),t.writeVaruint32(e.types.length);for(const r of e.types)t.writeString(r)}}resolveType(t){const e={};return this.resolve({name:t,types:e},{id:0})}resolveAll(){const t={},e={id:0};return{types:this.types.map((r=>this.resolve({name:r.new_type_name,types:t},e))),variants:this.variants.map((r=>this.resolve({name:r.name,types:t},e))),structs:this.structs.map((r=>this.resolve({name:r.name,types:t},e)))}}resolve({name:t,types:e},r){const i=e[t];if(i)return i;const n=new At.ResolvedType(t,++r.id);e[n.typeName]=n;const o=this.types.find((t=>t.new_type_name==n.name));if(o)return n.ref=this.resolve({name:o.type,types:e},r),n;const s=this.getStruct(n.name);if(s)return s.base&&(n.base=this.resolve({name:s.base,types:e},r)),n.fields=s.fields.map((t=>({name:t.name,type:this.resolve({name:t.type,types:e},r)}))),n;const a=this.getVariant(n.name);return a?(n.variant=a.types.map((t=>this.resolve({name:t,types:e},r))),n):n}getStruct(t){return this.structs.find((e=>e.name==t))}getVariant(t){return this.variants.find((e=>e.name==t))}getActionType(t){const e=mt.from(t).toString(),r=this.actions.find((t=>t.name.toString()===e));if(r)return r.type}equals(t){const e=At.from(t);return this.version==e.version&&this.types.length==e.types.length&&this.structs.length==e.structs.length&&this.actions.length==e.actions.length&&this.tables.length==e.tables.length&&this.ricardian_clauses.length==e.ricardian_clauses.length&&this.variants.length==e.variants.length&&at({object:this}).equals(at({object:e}))}toJSON(){return{version:this.version,types:this.types,structs:this.structs,actions:this.actions,tables:this.tables,ricardian_clauses:this.ricardian_clauses,error_messages:[],abi_extensions:[],variants:this.variants}}}At.abiName="abi",At.version="eosio::abi/1.1",function(t){class e{constructor(t,e=0){let r=t;r.endsWith("$")?(r=r.slice(0,-1),this.isExtension=!0):this.isExtension=!1,r.endsWith("?")?(r=r.slice(0,-1),this.isOptional=!0):this.isOptional=!1,r.endsWith("[]")?(r=r.slice(0,-2),this.isArray=!0):this.isArray=!1,this.id=e,this.name=r}get typeName(){let t=this.name;return this.isArray&&(t+="[]"),this.isOptional&&(t+="?"),this.isExtension&&(t+="$"),t}get allFields(){let t=this;const e=[],r=new Set;do{if(!t.fields)return;if(r.has(t.name))return;for(let r=t.fields.length-1;r>=0;r--)e.unshift(t.fields[r]);r.add(t.name),t=t.base}while(void 0!==t);return e}}t.ResolvedType=e}(At||(At={}));class St{static from(t,e){if(b(t,St))return t;switch(typeof t){case"number":if(!e)throw new Error("Symbol is required when creating Asset from number");return this.fromFloat(t,e);case"string":return this.fromString(t);default:throw new Error("Invalid asset")}}static fromString(t){const e=("string"===typeof t?t:"").split(" ");if(2!==e.length)throw new Error("Invalid asset string");const r=e[0].replace(".",""),i=(e[0].split(".")[1]||"").length,n=St.Symbol.fromParts(e[1],i);return new St(P.from(r),n)}static fromFloat(t,e){const r=St.Symbol.from(e);return new St(r.convertFloat(t),r)}static fromUnits(t,e){return new St(P.from(t),St.Symbol.from(e))}static fromABI(t){const e=P.fromABI(t),r=St.Symbol.fromABI(t);return new St(e,r)}static abiDefault(){return new this(P.from(0),St.Symbol.abiDefault())}constructor(t,e){this.units=t,this.symbol=e}equals(t){const{symbol:e,units:r}=St.from(t);return this.symbol.value.equals(e.value)&&this.units.equals(r)}get value(){return this.symbol.convertUnits(this.units)}set value(t){this.units=this.symbol.convertFloat(t)}toABI(t){this.units.toABI(t),this.symbol.toABI(t)}toString(){const t=this.units.toString().split("");let e=!1;"-"===t[0]&&(e=!0,t.shift());const r=this.symbol.precision;while(t.length<=r)t.unshift("0");r>0&&t.splice(t.length-r,0,".");let i=t.join("");return e&&(i="-"+i),i+" "+this.symbol.name}toJSON(){return this.toString()}}St.abiName="asset",function(t){class e{static from(t){if(b(t,e))return t;if(b(t,C))return new e(t);const r=t.split(",");if(2!==r.length)throw new Error("Invalid symbol string");const i=Number.parseInt(r[0]);return e.fromParts(r[1],i)}static fromParts(t,r){return new e(Pt(t,r))}static fromABI(t){return new e(C.fromABI(t))}static abiDefault(){return this.from("4,SYS")}constructor(t){if(It(t)>e.maxPrecision)throw new Error("Invalid asset symbol, precision too large");if(!e.symbolNamePattern.test(Et(t)))throw new Error("Invalid asset symbol, name must be uppercase A-Z");this.value=t}equals(t){return this.value.equals(e.from(t).value)}get name(){return Et(this.value)}get precision(){return It(this.value)}get code(){return new r(C.from(this.value.value.clone().iushrn(8)))}toABI(t){this.value.toABI(t)}convertUnits(t){return t.value.toNumber()/Math.pow(10,this.precision)}convertFloat(t){return P.from(t.toFixed(this.precision).replace(".",""))}toString(){return`${this.precision},${this.name}`}toJSON(){return this.toString()}}e.abiName="symbol",e.symbolNamePattern=/^[A-Z]{0,7}$/,e.maxPrecision=18,t.Symbol=e;class r{static from(t){return b(t,r)?t:("string"===typeof t&&(t=C.from(Ut(t))),new this(C.from(t)))}static fromABI(t){return new r(C.fromABI(t))}static abiDefault(){return this.from("SYS")}constructor(t){this.value=t}equals(t){return this.value.equals(r.from(t).value)}toABI(t){this.value.toABI(t)}toString(){return Bt(this.value.value.toArray("be"))}toJSON(){return this.toString()}}r.abiName="symbol_code",t.SymbolCode=r}(St||(St={}));class Nt{static from(t){return b(t,Nt)?t:new this(St.from(t.quantity),mt.from(t.contract))}static fromABI(t){return new Nt(St.fromABI(t),mt.fromABI(t))}constructor(t,e){this.quantity=t,this.contract=e}equals(t){return this.quantity.equals(t.quantity)&&this.contract.equals(t.contract)}toABI(t){this.quantity.toABI(t),this.contract.toABI(t)}toJSON(){return{quantity:this.quantity,contract:this.contract}}}function It(t){return t.value.and(C.from(255).value).toNumber()}function Et(t){const e=t.value.toArray("be").slice(0,-1);return Bt(e)}function Bt(t){return t.map((t=>String.fromCharCode(t))).reverse().join("")}function Pt(t,e){const r=Ut(t),i=new Uint8Array(r.length+1);return i[0]=e,i.set(r,1),C.from(i)}function Ut(t){const e=Math.min(t.length,7),r=new Uint8Array(e);for(let i=0;i<e;i++)r[i]=t.charCodeAt(i);return r}var Dt;Nt.abiName="extended_asset",function(t){let e;(function(t){t["E_CHECKSUM"]="E_CHECKSUM",t["E_INVALID"]="E_INVALID"})(e=t.ErrorCode||(t.ErrorCode={}));class r extends Error{constructor(t,e,r={}){super(t),this.code=e,this.info=r}}r.__className="DecodingError",t.DecodingError=r;const i="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",n=new Int16Array(255).fill(-1);for(let o=0;o<58;++o)n[i.charCodeAt(o)]=o;function s(t,i){if(null==i)return h(t);const o=new Uint8Array(i);for(let s=0;s<t.length;++s){let a=n[t.charCodeAt(s)];if(a<0)throw new r("Invalid Base58 character encountered",e.E_INVALID,{char:t[s]});for(let t=0;t<i;++t){const e=58*o[t]+a;o[t]=e,a=e>>8}if(a)throw new r("Base58 value is out of range",e.E_INVALID)}return o.reverse(),new _(o)}function a(t,i){const n=s(t,null!=i?i+4:i),o=n.array.subarray(0,-4),a=n.array.subarray(-4),c=y(o);if(!p(a,c))throw new r("Checksum mismatch",e.E_CHECKSUM,{actual:c,expected:a,data:o,hash:"double_sha256"});return new _(o)}function c(t,i,n){const o=s(t,null!=i?i+4:i),a=o.array.subarray(0,-4),c=o.array.subarray(-4),d=f(a,n);if(!p(c,d))throw new r("Checksum mismatch",e.E_CHECKSUM,{actual:d,expected:c,data:a,hash:"ripemd160"});return new _(a)}function d(t){t=_.from(t);const e=[];for(const r of t.array){let t=r;for(let r=0;r<e.length;++r){const o=(n[e[r]]<<8)+t;e[r]=i.charCodeAt(o%58),t=o/58|0}while(t)e.push(i.charCodeAt(t%58)),t=t/58|0}for(const r of t.array){if(r)break;e.push("1".charCodeAt(0))}return e.reverse(),String.fromCharCode(...e)}function l(t){return t=_.from(t),t=t.appending(y(t.array)),d(t)}function u(t,e){return t=_.from(t),t=t.appending(f(t.array,e)),d(t)}function h(t){const i=[];for(let o=0;o<t.length;++o){let s=n[t.charCodeAt(o)];if(s<0)throw new r("Invalid Base58 character encountered",e.E_INVALID,{char:t[o]});for(let t=0;t<i.length;++t){const e=58*i[t]+s;i[t]=255&e,s=e>>8}s&&i.push(s)}for(const e of t){if("1"!==e)break;i.push(0)}return i.reverse(),_.from(i)}function f(t,e){const r=(0,o.ripemd160)().update(t);return e&&r.update(e),new Uint8Array(r.digest().slice(0,4))}function y(t){const e=(0,o.sha256)().update(t).digest(),r=(0,o.sha256)().update(e).digest();return new Uint8Array(r.slice(0,4))}t.decode=s,t.decodeCheck=a,t.decodeRipemd160Check=c,t.encode=d,t.encodeCheck=l,t.encodeRipemd160Check=u}(Dt||(Dt={}));class Vt{static from(t){if(b(t,Vt))return t;if("object"===typeof t&&t.type&&t.compressed)return new Vt(S.from(t.type),new _(t.compressed));if("string"!==typeof t)throw new Error("Invalid public key");if(t.startsWith("PUB_")){const e=t.split("_");if(3!==e.length)throw new Error("Invalid public key string");const r=S.from(e[1]),i=r===S.K1||r===S.R1?33:void 0,n=Dt.decodeRipemd160Check(e[2],i,r);return new Vt(r,n)}if(t.length>=50){const e=Dt.decodeRipemd160Check(t.slice(-50));return new Vt(S.K1,e)}throw new Error("Invalid public key string")}static fromABI(t){const e=S.from(t.readByte());if(e==S.WA){const e=t.getPosition();t.advance(33),t.advance(1),t.advance(t.readVaruint32());const r=t.getPosition()-e;t.setPosition(e);const i=_.from(t.readArray(r));return new Vt(S.WA,i)}return new Vt(e,new _(t.readArray(33)))}constructor(t,e){this.type=t,this.data=e}equals(t){const e=Vt.from(t);return this.type===e.type&&this.data.equals(e.data)}toLegacyString(t="EOS"){if(this.type!==S.K1)throw new Error("Unable to create legacy formatted string for non-K1 key");return`${t}${Dt.encodeRipemd160Check(this.data)}`}toString(){return`PUB_${this.type}_${Dt.encodeRipemd160Check(this.data,this.type)}`}toABI(t){t.writeByte(S.indexFor(this.type)),t.writeArray(this.data.array)}toJSON(){return this.toString()}}Vt.abiName="public_key";const Tt={};function Ct(t){let e=Tt[t];if(!e)if("K1"===t)e=Tt[t]=new c.ec("secp256k1");else{if("R1"!==t)throw new Error(`Unknown curve type: ${t}`);e=Tt[t]=new c.ec("p256")}return e}function Wt(t,e,r){const i=Ct(r),n=t[0]-31,o=t.subarray(1,33),s=t.subarray(33),a=i.recoverPubKey(e,{r:o,s},n);return new Uint8Array(a.encodeCompressed())}function qt(t,e,r,i){const n=Ct(i),o=t.subarray(1,33),s=t.subarray(33);return n.verify(e,{r:o,s},r)}class jt{static from(t){if(b(t,jt))return t;if("object"===typeof t&&t.r&&t.s){const e=new Uint8Array(65);let r=t.recid;const i=S.from(t.type);return t.type!==S.K1&&t.type!==S.R1||(r+=31),e[0]=r,e.set(t.r,1),e.set(t.s,33),new jt(i,new _(e))}if("string"!==typeof t)throw new Error("Invalid signature");if(t.startsWith("SIG_")){const e=t.split("_");if(3!==e.length)throw new Error("Invalid signature string");const r=S.from(e[1]),i=r===S.K1||r===S.R1?65:void 0,n=Dt.decodeRipemd160Check(e[2],i,r);return new jt(r,n)}throw new Error("Invalid signature string")}static fromABI(t){const e=S.from(t.readByte());if(e===S.WA){const e=t.getPosition();t.advance(65),t.advance(t.readVaruint32()),t.advance(t.readVaruint32());const r=t.getPosition()-e;t.setPosition(e);const i=_.from(t.readArray(r));return new jt(S.WA,i)}return new jt(e,new _(t.readArray(65)))}constructor(t,e){this.type=t,this.data=e}equals(t){const e=jt.from(t);return this.type===e.type&&this.data.equals(e.data)}recoverDigest(t){t=x.from(t);const e=Wt(this.data.array,t.array,this.type);return Vt.from({compressed:e,type:this.type})}recoverMessage(t){return this.recoverDigest(x.hash(t))}verifyDigest(t,e){return t=x.from(t),qt(this.data.array,t.array,e.data.array,this.type)}verifyMessage(t,e){return this.verifyDigest(x.hash(t),e)}toString(){return`SIG_${this.type}_${Dt.encodeRipemd160Check(this.data,this.type)}`}toABI(t){t.writeByte(S.indexFor(this.type)),t.writeArray(this.data.array)}toJSON(){return this.toString()}}function $t(t,e){const r=Ct(e),i=r.keyFromPrivate(t),n=i.getPublic();return new Uint8Array(n.encodeCompressed())}function Lt(t,e,r){const i=Ct(r),n=i.keyFromPrivate(t),o=i.keyFromPublic(e).getPublic();return n.derive(o).toArrayLike(Uint8Array,"be")}function Ft(t,e,r){const i=Ct(r),n=i.keyFromPrivate(t);let o,s,a;if("K1"===r){let t=1;do{o=n.sign(e,{canonical:!0,pers:[t++]}),s=o.r.toArrayLike(Uint8Array,"be",32),a=o.s.toArrayLike(Uint8Array,"be",32)}while(!Mt(s,a))}else o=n.sign(e,{canonical:!0}),s=o.r.toArrayLike(Uint8Array,"be",32),a=o.s.toArrayLike(Uint8Array,"be",32);return{type:r,r:s,s:a,recid:o.recoveryParam||0}}function Mt(t,e){return!(128&t[0])&&!(0===t[0]&&!(128&t[1]))&&!(128&e[0])&&!(0===e[0]&&!(128&e[1]))}function Ot(t){const e=Ct(t),r=e.genKeyPair().getPrivate();return r.toArrayLike(Uint8Array,"be",32)}jt.abiName="signature";class Rt{static from(t){return b(t,Rt)?t:this.fromString(t)}static fromString(t,e=!1){try{const{type:e,data:r}=zt(t);return new this(e,r)}catch(r){if(r.message=`Invalid private key (${r.message})`,e&&b(r,Dt.DecodingError)&&r.code===Dt.ErrorCode.E_CHECKSUM){const e=t.startsWith("PVT_R1")?S.R1:S.K1,i=new _(r.info.data);return 33===i.length&&i.dropFirst(),i.zeropad(32,!0),new this(e,i)}throw r}}static generate(t){return new Rt(S.from(t),new _(Ot(t)))}constructor(t,e){if((t===S.K1||t===S.R1)&&32!==e.length)throw new Error("Invalid private key length");this.type=t,this.data=e}signDigest(t){return t=x.from(t),jt.from(Ft(this.data.array,t.array,this.type))}signMessage(t){return this.signDigest(x.hash(t))}sharedSecret(t){const e=Lt(this.data.array,t.data.array,this.type);return k.hash(e)}toPublic(){const t=$t(this.data.array,this.type);return Vt.from({compressed:t,type:this.type})}toWif(){if(this.type!==S.K1)throw new Error("Unable to generate WIF for non-k1 key");return Dt.encodeCheck(_.from([128]).appending(this.data))}toString(){return`PVT_${this.type}_${Dt.encodeRipemd160Check(this.data,this.type)}`}toJSON(){return this.toString()}}function zt(t){const e=typeof t;if("string"!==e)throw new Error(`Expected string, got ${e}`);if(t.startsWith("PVT_")){const e=t.split("_");if(3!==e.length)throw new Error("Invalid PVT format");const r=S.from(e[1]);let i;switch(r){case S.K1:case S.R1:i=32;break}const n=Dt.decodeRipemd160Check(e[2],i,r);return{type:r,data:n}}{const e=S.K1,r=Dt.decodeCheck(t);if(128!==r.array[0])throw new Error("Invalid WIF");return{type:e,data:r.droppingFirst()}}}var Jt;let Ht=Jt=class extends lt{static from(t){if("string"===typeof t){const e=t.split("@");if(2!==e.length&&e[0].length>0&&e[1].length>0)throw new Error("Invalid permission level string, should be in the format <actor>@<permission>");t={actor:e[0],permission:e[1]}}return super.from(t)}equals(t){const e=Jt.from(t);return this.actor.equals(e.actor)&&this.permission.equals(e.permission)}toString(){return`${this.actor}@${this.permission}`}};var Kt;(0,d.gn)([lt.field("name")],Ht.prototype,"actor",void 0),(0,d.gn)([lt.field("name")],Ht.prototype,"permission",void 0),Ht=Jt=(0,d.gn)([lt.type("permission_level")],Ht);let Zt=Kt=class extends lt{static from(t,e){const r=t.data;if(!_.isBytes(r)){let i;if(e)i=At.from(e).getActionType(t.name);else if(!r.constructor||void 0===r.constructor.abiName)throw new Error("Missing ABI definition when creating action with untyped action data");t={...t,data:at({object:r,type:i,abi:e})}}return super.from(t)}equals(t){const e=Kt.from(t);return this.account.equals(e.account)&&this.name.equals(e.name)&&u(this.authorization,e.authorization)&&this.data.equals(e.data)}decodeData(t){if("string"===typeof t||t.abiName)return tt({data:this.data,type:t});{const e=At.from(t),r=e.getActionType(this.name);if(!r)throw new Error(`Action ${this.name} does not exist in provided ABI`);return tt({data:this.data,type:r,abi:e})}}};var Gt;(0,d.gn)([lt.field("name")],Zt.prototype,"account",void 0),(0,d.gn)([lt.field("name")],Zt.prototype,"name",void 0),(0,d.gn)([lt.field(Ht,{array:!0})],Zt.prototype,"authorization",void 0),(0,d.gn)([lt.field("bytes")],Zt.prototype,"data",void 0),Zt=Kt=(0,d.gn)([lt.type("action")],Zt);let Yt=class extends lt{};(0,d.gn)([lt.field("uint16")],Yt.prototype,"type",void 0),(0,d.gn)([lt.field("bytes")],Yt.prototype,"data",void 0),Yt=(0,d.gn)([lt.type("transaction_extension")],Yt);let Qt=class extends lt{static from(t){return super.from({max_net_usage_words:0,max_cpu_usage_ms:0,delay_sec:0,...t})}};(0,d.gn)([lt.field("time_point_sec")],Qt.prototype,"expiration",void 0),(0,d.gn)([lt.field("uint16")],Qt.prototype,"ref_block_num",void 0),(0,d.gn)([lt.field("uint32")],Qt.prototype,"ref_block_prefix",void 0),(0,d.gn)([lt.field("varuint32")],Qt.prototype,"max_net_usage_words",void 0),(0,d.gn)([lt.field("uint8")],Qt.prototype,"max_cpu_usage_ms",void 0),(0,d.gn)([lt.field("varuint32")],Qt.prototype,"delay_sec",void 0),Qt=(0,d.gn)([lt.type("transaction_header")],Qt);let Xt=Gt=class extends Qt{static from(t,e){const r=t=>e?Array.isArray(e)?e.filter((e=>mt.from(e.contract).equals(t))).map((({abi:t})=>t))[0]:e:void 0,i=t=>Zt.from(t,r(t.account)),n=(t.actions||[]).map(i),o=(t.context_free_actions||[]).map(i),s={transaction_extensions:[],...t,context_free_actions:o,actions:n};return super.from(s)}equals(t){const e=Gt.from(t);return this.id.equals(e.id)}get id(){return x.hash(at({object:this}))}signingDigest(t){const e=this.signingData(t);return x.hash(e)}signingData(t){let e=_.from(x.from(t).array);return e=e.appending(at({object:this})),e=e.appending(new Uint8Array(32)),e}};(0,d.gn)([lt.field(Zt,{array:!0})],Xt.prototype,"context_free_actions",void 0),(0,d.gn)([lt.field(Zt,{array:!0})],Xt.prototype,"actions",void 0),(0,d.gn)([lt.field(Yt,{array:!0})],Xt.prototype,"transaction_extensions",void 0),Xt=Gt=(0,d.gn)([lt.type("transaction")],Xt);let te=class extends Xt{get transaction(){return Xt.from({...this,signatures:void 0,context_free_data:void 0})}get id(){return this.transaction.id}static from(t){return super.from({signatures:[],context_free_data:[],...t})}};(0,d.gn)([lt.field("signature[]")],te.prototype,"signatures",void 0),(0,d.gn)([lt.field("bytes[]")],te.prototype,"context_free_data",void 0),te=(0,d.gn)([lt.type("signed_transaction")],te);let ee=class extends lt{static from(t){return super.from({signatures:[],packed_context_free_data:"",compression:0,...t})}static fromSigned(t){const e=Xt.from(t);return this.from({signatures:t.signatures,packed_context_free_data:at({object:t.context_free_data,type:"bytes[]"}),packed_trx:at({object:e})})}getTransaction(){if(0!==Number(this.compression))throw new Error("Transaction compression not supported yet");return tt({data:this.packed_trx,type:Xt})}getSignedTransaction(){const t=this.getTransaction();return te.from({...t,signatures:this.signatures})}};(0,d.gn)([lt.field("signature[]")],ee.prototype,"signatures",void 0),(0,d.gn)([lt.field("uint8")],ee.prototype,"compression",void 0),(0,d.gn)([lt.field("bytes")],ee.prototype,"packed_context_free_data",void 0),(0,d.gn)([lt.field("bytes")],ee.prototype,"packed_trx",void 0),ee=(0,d.gn)([lt.type("packed_transaction")],ee);let re=class extends lt{};var ie;(0,d.gn)([lt.field("string")],re.prototype,"status",void 0),(0,d.gn)([lt.field("uint32")],re.prototype,"cpu_usage_us",void 0),(0,d.gn)([lt.field("uint32")],re.prototype,"net_usage_words",void 0),re=(0,d.gn)([lt.type("transaction_receipt")],re);let ne=class extends V{};ne=(0,d.gn)([pt("weight_type")],ne);let oe=class extends lt{};(0,d.gn)([lt.field(Vt)],oe.prototype,"key",void 0),(0,d.gn)([lt.field(ne)],oe.prototype,"weight",void 0),oe=(0,d.gn)([lt.type("key_weight")],oe);let se=class extends lt{};(0,d.gn)([lt.field(Ht)],se.prototype,"permission",void 0),(0,d.gn)([lt.field(ne)],se.prototype,"weight",void 0),se=(0,d.gn)([lt.type("permission_level_weight")],se);let ae=class extends lt{};(0,d.gn)([lt.field(T)],ae.prototype,"wait_sec",void 0),(0,d.gn)([lt.field(ne)],ae.prototype,"weight",void 0),ae=(0,d.gn)([lt.type("wait_weight")],ae);let ce=ie=class extends lt{static from(t){if(b(t,ie))return t;const e=super.from({keys:[],accounts:[],waits:[],...t});return e.sort(),e}get waitThreshold(){return this.waits.reduce(((t,e)=>t+e.weight.toNumber()),0)}get keyThreshold(){return this.threshold.toNumber()-this.waitThreshold}keyWeight(t){const e=this.keys.find((({key:e})=>e.equals(t)));return e?e.weight.toNumber():0}hasPermission(t,e=!1){const r=e?1:this.keyThreshold,i=this.keyWeight(t);return i>=r}sort(){this.keys.sort(((t,e)=>String(t.key).localeCompare(String(e.key)))),this.accounts.sort(((t,e)=>String(t.permission).localeCompare(String(e.permission)))),this.waits.sort(((t,e)=>String(t.wait_sec).localeCompare(String(e.wait_sec))))}};var de;(0,d.gn)([lt.field(T)],ce.prototype,"threshold",void 0),(0,d.gn)([lt.field(oe,{array:!0})],ce.prototype,"keys",void 0),(0,d.gn)([lt.field(se,{array:!0})],ce.prototype,"accounts",void 0),(0,d.gn)([lt.field(ae,{array:!0})],ce.prototype,"waits",void 0),ce=ie=(0,d.gn)([lt.type("authority")],ce),function(t){function e(t){return O(t).abi}function r(t){return JSON.stringify(t)}function i(t){const e=t=>{switch(typeof t){case"boolean":case"number":case"string":return t;case"object":{if(null===t)return t;if("function"===typeof t.toJSON)return e(t.toJSON());if(Array.isArray(t))return t.map(e);const r={};for(const i of Object.keys(t))r[i]=e(t[i]);return r}}};return e(t)}t.encode=at,t.decode=tt,t.synthesize=e,t.stringify=r,t.objectify=i}(de||(de={}));class le{constructor(t,e={}){if(t=t.trim(),t.endsWith("/")&&(t=t.slice(0,-1)),this.url=t,e.fetch)this.fetch=e.fetch;else if("undefined"!==typeof window&&window.fetch)this.fetch=window.fetch.bind(window);else{if("undefined"===typeof r.g||!r.g.fetch)throw new Error("Missing fetch");this.fetch=r.g.fetch.bind(r.g)}}async call(t,e){const r=this.url+t,i=await this.fetch(r,{method:"POST",body:void 0!==e?JSON.stringify(e):void 0}),n=await i.text();let o;try{o=JSON.parse(n)}catch{}const s={};for(const[a,c]of i.headers.entries())s[a]=c;return{headers:s,status:i.status,json:o,text:n}}}let pe=class extends lt{};(0,d.gn)([lt.field("name")],pe.prototype,"perm_name",void 0),(0,d.gn)([lt.field("name")],pe.prototype,"parent",void 0),(0,d.gn)([lt.field(ce)],pe.prototype,"required_auth",void 0),pe=(0,d.gn)([lt.type("account_permission")],pe);let ue=class extends lt{};(0,d.gn)([lt.field("int64")],ue.prototype,"used",void 0),(0,d.gn)([lt.field("int64")],ue.prototype,"available",void 0),(0,d.gn)([lt.field("int64")],ue.prototype,"max",void 0),ue=(0,d.gn)([lt.type("account_resource_limit")],ue);let he=class extends lt{};(0,d.gn)([lt.field("name")],he.prototype,"owner",void 0),(0,d.gn)([lt.field("asset")],he.prototype,"net_weight",void 0),(0,d.gn)([lt.field("asset")],he.prototype,"cpu_weight",void 0),(0,d.gn)([lt.field("uint64")],he.prototype,"ram_bytes",void 0),he=(0,d.gn)([lt.type("account_total_resources")],he);let fe=class extends lt{};(0,d.gn)([lt.field("name")],fe.prototype,"from",void 0),(0,d.gn)([lt.field("name")],fe.prototype,"to",void 0),(0,d.gn)([lt.field("asset")],fe.prototype,"net_weight",void 0),(0,d.gn)([lt.field("asset")],fe.prototype,"cpu_weight",void 0),fe=(0,d.gn)([lt.type("account_self_delegated_bandwidth")],fe);let ye=class extends lt{};(0,d.gn)([lt.field("name")],ye.prototype,"owner",void 0),(0,d.gn)([lt.field("time_point")],ye.prototype,"request_time",void 0),(0,d.gn)([lt.field("asset")],ye.prototype,"net_amount",void 0),(0,d.gn)([lt.field("asset")],ye.prototype,"cpu_amount",void 0),ye=(0,d.gn)([lt.type("account_refund_request")],ye);let ge=class extends lt{};(0,d.gn)([lt.field("name")],ge.prototype,"owner",void 0),(0,d.gn)([lt.field("name")],ge.prototype,"proxy",void 0),(0,d.gn)([lt.field("name",{array:!0})],ge.prototype,"producers",void 0),(0,d.gn)([lt.field("int64",{optional:!0})],ge.prototype,"staked",void 0),(0,d.gn)([lt.field("bool")],ge.prototype,"is_proxy",void 0),(0,d.gn)([lt.field("uint32",{optional:!0})],ge.prototype,"flags1",void 0),(0,d.gn)([lt.field("uint32")],ge.prototype,"reserved2",void 0),(0,d.gn)([lt.field("string")],ge.prototype,"reserved3",void 0),ge=(0,d.gn)([lt.type("account_voter_info")],ge);let me=class extends lt{};(0,d.gn)([lt.field("time_point",{optional:!0})],me.prototype,"key",void 0),(0,d.gn)([lt.field("int64",{optional:!0})],me.prototype,"value",void 0),(0,d.gn)([lt.field("time_point",{optional:!0})],me.prototype,"first",void 0),(0,d.gn)([lt.field("int64",{optional:!0})],me.prototype,"second",void 0),me=(0,d.gn)([lt.type("account_rex_info_maturities")],me);let ve=class extends lt{};(0,d.gn)([lt.field("uint32")],ve.prototype,"version",void 0),(0,d.gn)([lt.field("name")],ve.prototype,"owner",void 0),(0,d.gn)([lt.field("asset")],ve.prototype,"vote_stake",void 0),(0,d.gn)([lt.field("asset")],ve.prototype,"rex_balance",void 0),(0,d.gn)([lt.field("int64")],ve.prototype,"matured_rex",void 0),(0,d.gn)([lt.field(me,{array:!0})],ve.prototype,"rex_maturities",void 0),ve=(0,d.gn)([lt.type("account_rex_info")],ve);let be=class extends lt{getPermission(t){const e=mt.from(t),r=this.permissions.find((t=>t.perm_name.equals(e)));if(!r)throw new Error(`Unknown permission ${e} on account ${this.account_name}.`);return r}};(0,d.gn)([lt.field("name")],be.prototype,"account_name",void 0),(0,d.gn)([lt.field("uint32")],be.prototype,"head_block_num",void 0),(0,d.gn)([lt.field("time_point")],be.prototype,"head_block_time",void 0),(0,d.gn)([lt.field("bool")],be.prototype,"privileged",void 0),(0,d.gn)([lt.field("time_point")],be.prototype,"last_code_update",void 0),(0,d.gn)([lt.field("time_point")],be.prototype,"created",void 0),(0,d.gn)([lt.field("asset?")],be.prototype,"core_liquid_balance",void 0),(0,d.gn)([lt.field("int64")],be.prototype,"ram_quota",void 0),(0,d.gn)([lt.field("int64")],be.prototype,"net_weight",void 0),(0,d.gn)([lt.field("int64")],be.prototype,"cpu_weight",void 0),(0,d.gn)([lt.field(ue)],be.prototype,"net_limit",void 0),(0,d.gn)([lt.field(ue)],be.prototype,"cpu_limit",void 0),(0,d.gn)([lt.field("uint64")],be.prototype,"ram_usage",void 0),(0,d.gn)([lt.field(pe,{array:!0})],be.prototype,"permissions",void 0),(0,d.gn)([lt.field(he,{optional:!0})],be.prototype,"total_resources",void 0),(0,d.gn)([lt.field(fe,{optional:!0})],be.prototype,"self_delegated_bandwidth",void 0),(0,d.gn)([lt.field(ye,{optional:!0})],be.prototype,"refund_request",void 0),(0,d.gn)([lt.field(ge,{optional:!0})],be.prototype,"voter_info",void 0),(0,d.gn)([lt.field(ve,{optional:!0})],be.prototype,"rex_info",void 0),be=(0,d.gn)([lt.type("account_object")],be);let _e=class extends lt{};(0,d.gn)([lt.field("name")],_e.prototype,"producer_name",void 0),(0,d.gn)([lt.field("public_key")],_e.prototype,"block_signing_key",void 0),_e=(0,d.gn)([lt.type("new_producers_entry")],_e);let we=class extends lt{};(0,d.gn)([lt.field("uint32")],we.prototype,"version",void 0),(0,d.gn)([lt.field(_e,{array:!0})],we.prototype,"producers",void 0),we=(0,d.gn)([lt.type("new_producers")],we);let xe=class extends lt{};(0,d.gn)([lt.field("uint16")],xe.prototype,"type",void 0),(0,d.gn)([lt.field("bytes")],xe.prototype,"data",void 0),xe=(0,d.gn)([lt.type("block_extension")],xe);let ke=class extends lt{};(0,d.gn)([lt.field("uint16")],ke.prototype,"type",void 0),(0,d.gn)([lt.field("bytes")],ke.prototype,"data",void 0),ke=(0,d.gn)([lt.type("header_extension")],ke);let Ae=class{static from(t){let e,r;return"string"===typeof t?(e=x.from(t),r={}):(e=x.from(t.id),r=t),new this(e,r)}constructor(t,e){this.id=t,this.extra=e}get transaction(){if(this.extra.packed_trx)return de.decode({data:this.extra.packed_trx,type:Xt})}get signatures(){if(this.extra.signatures)return this.extra.signatures.map(jt.from)}equals(t){return this.id.equals(t.id)}toJSON(){return this.id}};Ae.abiName="trx_variant";let Se=class extends re{get id(){return this.trx.id}};(0,d.gn)([lt.field(Ae)],Se.prototype,"trx",void 0),Se=(0,d.gn)([lt.type("get_block_response_receipt")],Se);let Ne=class extends lt{};(0,d.gn)([lt.field("time_point")],Ne.prototype,"timestamp",void 0),(0,d.gn)([lt.field("name")],Ne.prototype,"producer",void 0),(0,d.gn)([lt.field("uint16")],Ne.prototype,"confirmed",void 0),(0,d.gn)([lt.field("checksum256")],Ne.prototype,"previous",void 0),(0,d.gn)([lt.field("checksum256")],Ne.prototype,"transaction_mroot",void 0),(0,d.gn)([lt.field("checksum256")],Ne.prototype,"action_mroot",void 0),(0,d.gn)([lt.field("uint32")],Ne.prototype,"schedule_version",void 0),(0,d.gn)([lt.field(we,{optional:!0})],Ne.prototype,"new_producers",void 0),(0,d.gn)([lt.field("header_extension",{optional:!0})],Ne.prototype,"header_extensions",void 0),(0,d.gn)([lt.field("any",{optional:!0})],Ne.prototype,"new_protocol_features",void 0),(0,d.gn)([lt.field("signature")],Ne.prototype,"producer_signature",void 0),(0,d.gn)([lt.field(Se,{array:!0})],Ne.prototype,"transactions",void 0),(0,d.gn)([lt.field("block_extension",{optional:!0})],Ne.prototype,"block_extensions",void 0),(0,d.gn)([lt.field("checksum256")],Ne.prototype,"id",void 0),(0,d.gn)([lt.field("uint32")],Ne.prototype,"block_num",void 0),(0,d.gn)([lt.field("uint32")],Ne.prototype,"ref_block_prefix",void 0),Ne=(0,d.gn)([lt.type("get_block_response")],Ne);let Ie=class extends lt{};(0,d.gn)([lt.field("name")],Ie.prototype,"producer_name",void 0),(0,d.gn)([lt.field("any")],Ie.prototype,"authority",void 0),Ie=(0,d.gn)([lt.type("active_schedule_producer_authority")],Ie);let Ee=class extends lt{};(0,d.gn)([lt.field("name")],Ee.prototype,"producer_name",void 0),(0,d.gn)([lt.field(Ie)],Ee.prototype,"authority",void 0),Ee=(0,d.gn)([lt.type("active_schedule_producer")],Ee);let Be=class extends lt{};(0,d.gn)([lt.field("uint32")],Be.prototype,"version",void 0),(0,d.gn)([lt.field(Ee,{array:!0})],Be.prototype,"producers",void 0),Be=(0,d.gn)([lt.type("active_schedule")],Be);let Pe=class extends lt{};(0,d.gn)([lt.field("time_point")],Pe.prototype,"timestamp",void 0),(0,d.gn)([lt.field("name")],Pe.prototype,"producer",void 0),(0,d.gn)([lt.field("uint16")],Pe.prototype,"confirmed",void 0),(0,d.gn)([lt.field("checksum256")],Pe.prototype,"previous",void 0),(0,d.gn)([lt.field("checksum256")],Pe.prototype,"transaction_mroot",void 0),(0,d.gn)([lt.field("checksum256")],Pe.prototype,"action_mroot",void 0),(0,d.gn)([lt.field("uint32")],Pe.prototype,"schedule_version",void 0),(0,d.gn)([lt.field(ke,{array:!0,optional:!0})],Pe.prototype,"header_extensions",void 0),(0,d.gn)([lt.field("signature")],Pe.prototype,"producer_signature",void 0),Pe=(0,d.gn)([lt.type("block_state_header")],Pe);let Ue=class extends lt{};(0,d.gn)([lt.field("uint32")],Ue.prototype,"block_num",void 0),(0,d.gn)([lt.field("uint32")],Ue.prototype,"dpos_proposed_irreversible_blocknum",void 0),(0,d.gn)([lt.field("uint32")],Ue.prototype,"dpos_irreversible_blocknum",void 0),(0,d.gn)([lt.field("checksum256")],Ue.prototype,"id",void 0),(0,d.gn)([lt.field(Pe)],Ue.prototype,"header",void 0),(0,d.gn)([lt.field("any")],Ue.prototype,"active_schedule",void 0),(0,d.gn)([lt.field("any")],Ue.prototype,"blockroot_merkle",void 0),(0,d.gn)([lt.field("any")],Ue.prototype,"producer_to_last_produced",void 0),(0,d.gn)([lt.field("any")],Ue.prototype,"producer_to_last_implied_irb",void 0),(0,d.gn)([lt.field("any")],Ue.prototype,"valid_block_signing_authority",void 0),(0,d.gn)([lt.field("any")],Ue.prototype,"confirm_count",void 0),(0,d.gn)([lt.field("any")],Ue.prototype,"pending_schedule",void 0),(0,d.gn)([lt.field("any")],Ue.prototype,"activated_protocol_features",void 0),(0,d.gn)([lt.field("any")],Ue.prototype,"additional_signatures",void 0),Ue=(0,d.gn)([lt.type("get_block_header_state_response")],Ue);let De=class extends lt{getTransactionHeader(t=120){const e=xt.fromMilliseconds(this.head_block_time.toMilliseconds()+1e3*t),r=this.last_irreversible_block_id,i=r.array.subarray(8,12),n=new Uint32Array(i.buffer,i.byteOffset,1)[0];return Qt.from({expiration:e,ref_block_num:65535&Number(this.last_irreversible_block_num),ref_block_prefix:n})}};(0,d.gn)([lt.field("string")],De.prototype,"server_version",void 0),(0,d.gn)([lt.field("checksum256")],De.prototype,"chain_id",void 0),(0,d.gn)([lt.field("uint32")],De.prototype,"head_block_num",void 0),(0,d.gn)([lt.field("uint32")],De.prototype,"last_irreversible_block_num",void 0),(0,d.gn)([lt.field("checksum256")],De.prototype,"last_irreversible_block_id",void 0),(0,d.gn)([lt.field("checksum256")],De.prototype,"head_block_id",void 0),(0,d.gn)([lt.field("time_point")],De.prototype,"head_block_time",void 0),(0,d.gn)([lt.field("name")],De.prototype,"head_block_producer",void 0),(0,d.gn)([lt.field("uint64")],De.prototype,"virtual_block_cpu_limit",void 0),(0,d.gn)([lt.field("uint64")],De.prototype,"virtual_block_net_limit",void 0),(0,d.gn)([lt.field("uint64")],De.prototype,"block_cpu_limit",void 0),(0,d.gn)([lt.field("uint64")],De.prototype,"block_net_limit",void 0),(0,d.gn)([lt.field("string?")],De.prototype,"server_version_string",void 0),(0,d.gn)([lt.field("uint32?")],De.prototype,"fork_db_head_block_num",void 0),(0,d.gn)([lt.field("checksum256?")],De.prototype,"fork_db_head_block_id",void 0),De=(0,d.gn)([lt.type("get_info_response")],De);let Ve=class extends lt{};(0,d.gn)([lt.field("name")],Ve.prototype,"code",void 0),(0,d.gn)([lt.field("name")],Ve.prototype,"scope",void 0),(0,d.gn)([lt.field("name")],Ve.prototype,"table",void 0),(0,d.gn)([lt.field("name")],Ve.prototype,"payer",void 0),(0,d.gn)([lt.field("uint32")],Ve.prototype,"count",void 0),Ve=(0,d.gn)([lt.type("get_table_by_scope_response_row")],Ve);let Te=class extends lt{};(0,d.gn)([lt.field(Ve,{array:!0})],Te.prototype,"rows",void 0),(0,d.gn)([lt.field("string")],Te.prototype,"more",void 0),Te=(0,d.gn)([lt.type("get_table_by_scope_response")],Te);let Ce=class extends lt{};(0,d.gn)([lt.field(C)],Ce.prototype,"global_action_seq",void 0),(0,d.gn)([lt.field(P)],Ce.prototype,"account_action_seq",void 0),(0,d.gn)([lt.field(T)],Ce.prototype,"block_num",void 0),(0,d.gn)([lt.field(kt)],Ce.prototype,"block_time",void 0),(0,d.gn)([lt.field("any")],Ce.prototype,"action_trace",void 0),(0,d.gn)([lt.field("boolean?")],Ce.prototype,"irrevirsible",void 0),Ce=(0,d.gn)([lt.type("ordered_action_result")],Ce);let We=class extends lt{};(0,d.gn)([lt.field(Ce,{array:!0})],We.prototype,"actions",void 0),(0,d.gn)([lt.field(B)],We.prototype,"last_irreversible_block",void 0),(0,d.gn)([lt.field(B)],We.prototype,"head_block_num",void 0),(0,d.gn)([lt.field("boolean?")],We.prototype,"time_limit_exceeded_error",void 0),We=(0,d.gn)([lt.type("get_actions_response")],We);let qe=class extends lt{};qe=(0,d.gn)([lt.type("transaction_trace")],qe);let je=class extends lt{};(0,d.gn)([lt.field("any")],je.prototype,"actions",void 0),(0,d.gn)([lt.field("any")],je.prototype,"context_free_actions",void 0),(0,d.gn)([lt.field("any")],je.prototype,"context_free_data",void 0),(0,d.gn)([lt.field("number")],je.prototype,"delay_sec",void 0),(0,d.gn)([lt.field("string")],je.prototype,"expiration",void 0),(0,d.gn)([lt.field("number")],je.prototype,"max_cpu_usage_ms",void 0),(0,d.gn)([lt.field("number")],je.prototype,"max_net_usage_words",void 0),(0,d.gn)([lt.field("number")],je.prototype,"ref_block_num",void 0),(0,d.gn)([lt.field("number")],je.prototype,"ref_block_prefix",void 0),(0,d.gn)([lt.field("string",{array:!0})],je.prototype,"signatures",void 0),je=(0,d.gn)([lt.type("trx")],je);let $e=class extends lt{};(0,d.gn)([lt.field(re)],$e.prototype,"receipt",void 0),(0,d.gn)([lt.field("trx")],$e.prototype,"trx",void 0),$e=(0,d.gn)([lt.type("transaction_info")],$e);let Le=class extends lt{};(0,d.gn)([lt.field(x)],Le.prototype,"id",void 0),(0,d.gn)([lt.field(T)],Le.prototype,"block_num",void 0),(0,d.gn)([lt.field(kt)],Le.prototype,"block_time",void 0),(0,d.gn)([lt.field(T)],Le.prototype,"last_irreversible_block",void 0),(0,d.gn)([lt.field("any?")],Le.prototype,"traces",void 0),(0,d.gn)([lt.field("any")],Le.prototype,"trx",void 0),Le=(0,d.gn)([lt.type("get_transaction_response")],Le);let Fe=class extends lt{};(0,d.gn)([lt.field("name",{array:!0})],Fe.prototype,"account_names",void 0),Fe=(0,d.gn)([lt.type("get_key_accounts_response")],Fe);let Me=class extends lt{};(0,d.gn)([lt.field("name",{array:!0})],Me.prototype,"controlled_accounts",void 0),Me=(0,d.gn)([lt.type("get_controlled_accounts_response")],Me);let Oe=class extends lt{};(0,d.gn)([lt.field("string")],Oe.prototype,"state",void 0),(0,d.gn)([lt.field("uint32")],Oe.prototype,"head_number",void 0),(0,d.gn)([lt.field("checksum256")],Oe.prototype,"head_id",void 0),(0,d.gn)([lt.field("time_point")],Oe.prototype,"head_timestamp",void 0),(0,d.gn)([lt.field("uint32")],Oe.prototype,"irreversible_number",void 0),(0,d.gn)([lt.field("checksum256")],Oe.prototype,"irreversible_id",void 0),(0,d.gn)([lt.field("time_point")],Oe.prototype,"irreversible_timestamp",void 0),(0,d.gn)([lt.field("checksum256")],Oe.prototype,"earliest_tracked_block_id",void 0),(0,d.gn)([lt.field("uint32")],Oe.prototype,"earliest_tracked_block_number",void 0),Oe=(0,d.gn)([lt.type("get_transaction_status_response")],Oe);class Re{constructor(t){this.client=t}async get_abi(t){return this.client.call({path:"/v1/chain/get_abi",params:{account_name:mt.from(t)}})}async get_account(t){return this.client.call({path:"/v1/chain/get_account",params:{account_name:mt.from(t)},responseType:be})}async get_block(t){return this.client.call({path:"/v1/chain/get_block",params:{block_num_or_id:t},responseType:Ne})}async get_block_header_state(t){return this.client.call({path:"/v1/chain/get_block_header_state",params:{block_num_or_id:t},responseType:Ue})}async get_currency_balance(t,e,r){const i={account:mt.from(e),code:mt.from(t)};return r&&(i.symbol=r),this.client.call({path:"/v1/chain/get_currency_balance",params:i,responseType:"asset[]"})}async get_info(){return this.client.call({path:"/v1/chain/get_info",responseType:De})}async compute_transaction(t){return b(t,ee)||(t=ee.fromSigned(te.from(t))),this.client.call({path:"/v1/chain/compute_transaction",params:{transaction:t}})}async push_transaction(t){return b(t,ee)||(t=ee.fromSigned(te.from(t))),this.client.call({path:"/v1/chain/push_transaction",params:t})}async send_transaction(t){return b(t,ee)||(t=ee.fromSigned(te.from(t))),this.client.call({path:"/v1/chain/send_transaction",params:t})}async send_transaction2(t,e){return b(t,ee)||(t=ee.fromSigned(te.from(t))),this.client.call({path:"/v1/chain/send_transaction2",params:{return_failure_trace:!0,retry_trx:!1,retry_trx_num_blocks:0,transaction:t,...e}})}async get_table_rows(t){const e=t.type;let r=t.key_type;const i=t.lower_bound||t.upper_bound;!r&&i&&(b(i,C)?r="i64":b(i,W)?r="i128":b(i,x)?r="sha256":b(i,A)&&(r="ripemd160")),r||(r="name");let n=t.json;void 0===n&&(n=void 0===e);let o=t.upper_bound;o&&"string"!==typeof o&&(o=String(o));let s=t.lower_bound;s&&"string"!==typeof s&&(s=String(s));let a=t.scope;"undefined"===typeof a?a=String(mt.from(t.code)):"string"!==typeof a&&(a=String(a));let c,{rows:d,more:l,next_key:p}=await this.client.call({path:"/v1/chain/get_table_rows",params:{...t,code:mt.from(t.code),table:mt.from(t.table),limit:void 0!==t.limit?T.from(t.limit):void 0,scope:a,key_type:r,json:n,upper_bound:o,lower_bound:s}});if(t.show_payer&&(c=[],d=d.map((({data:t,payer:e})=>(c.push(mt.from(e)),t)))),e&&(d=n?d.map((t=>"string"===typeof t&&_.isBytes(t)?de.decode({data:_.from(t),type:e}):de.decode({object:t,type:e}))):d.map((t=>_.from(t))).map((t=>de.decode({data:t,type:e})))),p&&p.length>0){let t;switch(r){case"i64":t=C;break;case"i128":t=W;break;case"name":t=mt;break;case"float64":t=yt;break;case"float128":t=gt;break;case"sha256":t=x;break;case"ripemd160":t=A;break;default:throw new Error(`Unsupported key type: ${r}`)}p=t===mt?mt.from(de.decode({object:p,type:C})):de.decode({object:p,type:t})}else p=void 0;return{rows:d,more:l,next_key:p,ram_payers:c}}async get_table_by_scope(t){return this.client.call({path:"/v1/chain/get_table_by_scope",params:t,responseType:Te})}async get_transaction_status(t){return this.client.call({path:"/v1/chain/get_transaction_status",params:{id:x.from(t)},responseType:Oe})}}class ze{constructor(t){this.client=t}async get_actions(t,e,r){return this.client.call({path:"/v1/history/get_actions",params:{account_name:mt.from(t),pos:B.from(e),offset:B.from(r)},responseType:We})}async get_transaction(t,e={}){return this.client.call({path:"/v1/history/get_transaction",params:{id:x.from(t),block_num_hint:e.blockNumHint&&T.from(e.blockNumHint),traces:!0!==e.excludeTraces&&void 0},responseType:Le})}async get_key_accounts(t){return this.client.call({path:"/v1/history/get_key_accounts",params:{public_key:Vt.from(t)},responseType:Fe})}async get_controlled_accounts(t){return this.client.call({path:"/v1/history/get_controlled_accounts",params:{controlling_account:mt.from(t)},responseType:Me})}}class Je extends Error{static formatError(t){return"unspecified"===t.what&&t.details[0].file&&"http_plugin.cpp"===t.details[0].file&&"unknown key"===t.details[0].message.slice(0,11)?"Account not found":"unspecified"===t.what&&t.details&&t.details.length>0?t.details[0].message:t.what&&t.what.length>0?t.what:"Unknown API error"}constructor(t,e){let r;r=e.json&&e.json.error?`${Je.formatError(e.json.error)} at ${t}`:`HTTP ${e.status} at ${t}`,super(r),this.path=t,this.response=e}get error(){const{json:t}=this.response;return t?t.error:void 0}get name(){const{error:t}=this;return t?t.name:"unspecified"}get code(){const{error:t}=this;return t?t.code:0}get details(){const{error:t}=this;return t?t.details:[]}}Je.__className="APIError";class He{constructor(t){if(this.v1={chain:new Re(this),history:new ze(this)},t.provider)this.provider=t.provider;else{if(!t.url)throw new Error("Missing url or provider");this.provider=new le(t.url,t)}}async call(t){const e=await this.provider.call(t.path,t.params),{json:r}=e;if(2!==Math.floor(e.status/100)||r&&"object"===typeof r.error)throw new Je(t.path,e);return t.responseType?tt({type:t.responseType,object:e.json}):e.json||e.text}}He.__className="APIClient";var Ke;let Ze=class extends lt{};(0,d.gn)([lt.field("uint16")],Ze.prototype,"networkVersion",void 0),(0,d.gn)([lt.field("checksum256")],Ze.prototype,"chainId",void 0),(0,d.gn)([lt.field("checksum256")],Ze.prototype,"nodeId",void 0),(0,d.gn)([lt.field("public_key")],Ze.prototype,"key",void 0),(0,d.gn)([lt.field("int64")],Ze.prototype,"time",void 0),(0,d.gn)([lt.field("checksum256")],Ze.prototype,"token",void 0),(0,d.gn)([lt.field("signature")],Ze.prototype,"sig",void 0),(0,d.gn)([lt.field("string")],Ze.prototype,"p2pAddress",void 0),(0,d.gn)([lt.field("uint32")],Ze.prototype,"lastIrreversibleBlockNumber",void 0),(0,d.gn)([lt.field("checksum256")],Ze.prototype,"lastIrreversibleBlockId",void 0),(0,d.gn)([lt.field("uint32")],Ze.prototype,"headNum",void 0),(0,d.gn)([lt.field("checksum256")],Ze.prototype,"headId",void 0),(0,d.gn)([lt.field("string")],Ze.prototype,"os",void 0),(0,d.gn)([lt.field("string")],Ze.prototype,"agent",void 0),(0,d.gn)([lt.field("int16")],Ze.prototype,"generation",void 0),Ze=(0,d.gn)([lt.type("handshake_message")],Ze);let Ge=class extends lt{};(0,d.gn)([lt.field("uint32")],Ge.prototype,"lastIrreversibleBlockNumber",void 0),(0,d.gn)([lt.field("checksum256")],Ge.prototype,"lastIrreversibleBlockId",void 0),(0,d.gn)([lt.field("uint32")],Ge.prototype,"headNum",void 0),(0,d.gn)([lt.field("checksum256")],Ge.prototype,"headId",void 0),Ge=(0,d.gn)([lt.type("chain_size_message")],Ge);let Ye=class extends lt{};(0,d.gn)([lt.field("uint8")],Ye.prototype,"reason",void 0),(0,d.gn)([lt.field("checksum256")],Ye.prototype,"nodeId",void 0),Ye=(0,d.gn)([lt.type("go_away_message")],Ye);let Qe=class extends lt{};(0,d.gn)([lt.field("int64")],Qe.prototype,"org",void 0),(0,d.gn)([lt.field("int64")],Qe.prototype,"rec",void 0),(0,d.gn)([lt.field("int64")],Qe.prototype,"xmt",void 0),(0,d.gn)([lt.field("int64")],Qe.prototype,"dst",void 0),Qe=(0,d.gn)([lt.type("time_message")],Qe);let Xe=class extends lt{};(0,d.gn)([lt.field("checksum256",{array:!0})],Xe.prototype,"knownTrx",void 0),(0,d.gn)([lt.field("checksum256",{array:!0})],Xe.prototype,"knownBlocks",void 0),Xe=(0,d.gn)([lt.type("notice_message")],Xe);let tr=class extends lt{};(0,d.gn)([lt.field("checksum256",{array:!0})],tr.prototype,"reqTrx",void 0),(0,d.gn)([lt.field("checksum256",{array:!0})],tr.prototype,"reqBlocks",void 0),tr=(0,d.gn)([lt.type("request_message")],tr);let er=class extends lt{};(0,d.gn)([lt.field("uint32")],er.prototype,"startBlock",void 0),(0,d.gn)([lt.field("uint32")],er.prototype,"endBlock",void 0),er=(0,d.gn)([lt.type("sync_request_message")],er);let rr=class extends lt{};(0,d.gn)([lt.field("name")],rr.prototype,"producer_name",void 0),(0,d.gn)([lt.field("public_key")],rr.prototype,"block_signing_key",void 0),rr=(0,d.gn)([lt.type("new_producers_entry")],rr);let ir=class extends lt{};(0,d.gn)([lt.field("uint32")],ir.prototype,"version",void 0),(0,d.gn)([lt.field(rr,{array:!0})],ir.prototype,"producers",void 0),ir=(0,d.gn)([lt.type("new_producers")],ir);let nr=class extends lt{};(0,d.gn)([lt.field("uint16")],nr.prototype,"type",void 0),(0,d.gn)([lt.field("bytes")],nr.prototype,"data",void 0),nr=(0,d.gn)([lt.type("block_extension")],nr);let or=class extends lt{};(0,d.gn)([lt.field("uint16")],or.prototype,"type",void 0),(0,d.gn)([lt.field("bytes")],or.prototype,"data",void 0),or=(0,d.gn)([lt.type("header_extension")],or);let sr=class extends ut{};sr=(0,d.gn)([ut.type("trx_variant",[x,ee])],sr);let ar=class extends lt{};(0,d.gn)([lt.field(D)],ar.prototype,"status",void 0),(0,d.gn)([lt.field(T)],ar.prototype,"cpu_usage_us",void 0),(0,d.gn)([lt.field(j)],ar.prototype,"net_usage_words",void 0),(0,d.gn)([lt.field(sr)],ar.prototype,"trx",void 0),ar=(0,d.gn)([lt.type("full_transaction_receipt")],ar);let cr=Ke=class extends lt{get blockNum(){const t=this.previous.array.slice(0,4);let e=0;for(let r=0;r<4;r++)e=(e<<8)+t[r];return e+1}get id(){const t=x.hash(de.encode({object:this,type:Ke})),e=new Uint8Array(4);return e[0]=this.blockNum>>24&255,e[1]=this.blockNum>>16&255,e[2]=this.blockNum>>8&255,e[3]=255&this.blockNum,t.array.set(e,0),t}};(0,d.gn)([lt.field("uint32")],cr.prototype,"timeSlot",void 0),(0,d.gn)([lt.field("name")],cr.prototype,"producer",void 0),(0,d.gn)([lt.field("uint16")],cr.prototype,"confirmed",void 0),(0,d.gn)([lt.field("checksum256")],cr.prototype,"previous",void 0),(0,d.gn)([lt.field("checksum256")],cr.prototype,"transaction_mroot",void 0),(0,d.gn)([lt.field("checksum256")],cr.prototype,"action_mroot",void 0),(0,d.gn)([lt.field("uint32")],cr.prototype,"schedule_version",void 0),(0,d.gn)([lt.field(ir,{optional:!0})],cr.prototype,"new_producers",void 0),(0,d.gn)([lt.field(or,{array:!0})],cr.prototype,"header_extensions",void 0),cr=Ke=(0,d.gn)([lt.type("block_header")],cr);let dr=class extends cr{};(0,d.gn)([lt.field("signature")],dr.prototype,"producer_signature",void 0),(0,d.gn)([lt.field(ar,{array:!0})],dr.prototype,"transactions",void 0),(0,d.gn)([lt.field(nr,{array:!0})],dr.prototype,"block_extensions",void 0),dr=(0,d.gn)([lt.type("signed_block")],dr);let lr=class extends ut{};lr=(0,d.gn)([ut.type("net_message",[Ze,Ge,Ye,Qe,Xe,tr,er,dr,ee])],lr);class pr{constructor(t){if(!t.provider)throw new Error("Missing provider");this.provider=t.provider,void 0!==t.setTimeoutImpl?this.setTimeoutImpl=t.setTimeoutImpl:this.setTimeoutImpl=setTimeout,void 0!==t.heartbeatTimoutMs&&(this.heartbeatTimoutMs=t.heartbeatTimoutMs,this.resetHeartbeat()),this.provider.on("data",(t=>{this.handleData(t)})),this.provider.on("error",(t=>{this.emit("error",[t])})),this.provider.on("close",(()=>{this.emit("close",[])})),this.eventListeners={}}send(t,e){const r=lr.from(t),i=de.encode({object:r});this.provider.write(i.array,e)}end(t){this.endHeartbeat(),this.provider.end(t)}destroy(t){this.endHeartbeat(),this.provider.destroy(t)}handleData(t){try{const e=de.decode({type:lr,data:t});this.emit("message",[e])}catch(e){this.emit("error",[e])}}endHeartbeat(){void 0!==this.heartbeatTimoutId&&(clearTimeout(this.heartbeatTimoutId),this.heartbeatTimoutId=void 0)}resetHeartbeat(){this.endHeartbeat(),void 0!==this.heartbeatTimoutMs&&this.setTimeoutImpl((()=>{this.handleHeartbeat()}),this.heartbeatTimoutMs)}handleHeartbeat(){const t=Date.now(),e=Qe.from({org:t,rec:0,xmt:0,dst:0});this.send(e,(()=>{this.resetHeartbeat()}))}on(t,e){return this.addListenerInternal(t,e,!1,!1)}once(t,e){return this.addListenerInternal(t,e,!0,!1)}addListener(t,e){return this.addListenerInternal(t,e,!1,!1)}prependListener(t,e){return this.addListenerInternal(t,e,!1,!0)}removeListener(t,e){return void 0!==this.eventListeners[t]&&(this.eventListeners[t]=this.eventListeners[t].filter((t=>t.handler!==e))),this}addListenerInternal(t,e,r,i){return void 0===this.eventListeners[t]&&(this.eventListeners[t]=[]),i?this.eventListeners[t].unshift({once:r,handler:e}):this.eventListeners[t].push({once:r,handler:e}),this}emit(t,e){if(void 0!==this.eventListeners[t]){for(const{handler:r}of this.eventListeners[t]){const t=r;t(...e)}this.eventListeners[t]=this.eventListeners[t].filter((t=>!0!==t.once))}}}pr.__className="P2PClient";class ur{constructor(t){this.nextProvider=t,this.remainingData=new Uint8Array(0),this.dataHandlers=[],this.errorHandlers=[],this.nextProvider.on("data",(t=>{const e=new Uint8Array(this.remainingData.byteLength+t.byteLength);e.set(this.remainingData,0),e.set(t,this.remainingData.byteLength),this.remainingData=e;while(this.remainingData.byteLength>=4){const t=new DataView(this.remainingData.buffer),e=t.getUint32(0,!0);if(e>ur.maxReadLength&&this.emitError(new Error("Incoming Message too long")),this.remainingData.byteLength<4+e)break;const r=this.remainingData.subarray(4,4+e);this.remainingData=this.remainingData.slice(4+e),this.emitData(r)}})),this.nextProvider.on("error",(t=>{this.emitError(t)}))}write(t,e){const r=new Uint8Array(4+t.byteLength),i=new DataView(r.buffer);i.setUint32(0,t.byteLength,!0),r.set(t,4),this.nextProvider.write(r,e)}end(t){this.nextProvider.end(t)}destroy(t){this.nextProvider.destroy(t)}on(t,e){return"data"===t?this.dataHandlers.push(e):"error"===t?this.errorHandlers.push(e):this.nextProvider.on(t,e),this}emitData(t){for(const e of this.dataHandlers)e(t)}emitError(t){for(const e of this.errorHandlers)e(t)}}ur.maxReadLength=8388608}}]);