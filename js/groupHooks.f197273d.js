"use strict";(self["webpackChunkthedaoscapefrontend"]=self["webpackChunkthedaoscapefrontend"]||[]).push([[606],{94205:(e,o,t)=>{t.r(o),t.d(o,{default:()=>M});var a=t(34182);const n=(0,a.createElementVNode)("span",null,"Hooks",-1),c={key:0},l={key:1},r={key:0},i={key:1},s={class:"q-pa-md text-caption"},d=(0,a.createTextVNode)("No hooks");function h(e,o,t,h,k,m){const p=(0,a.resolveComponent)("q-icon"),u=(0,a.resolveComponent)("q-input"),C=(0,a.resolveComponent)("q-toolbar-title"),f=(0,a.resolveComponent)("q-space"),_=(0,a.resolveComponent)("q-tooltip"),v=(0,a.resolveComponent)("q-btn"),V=(0,a.resolveComponent)("q-toolbar"),g=(0,a.resolveComponent)("q-item-label"),N=(0,a.resolveComponent)("q-item-section"),w=(0,a.resolveComponent)("q-separator"),b=(0,a.resolveComponent)("q-expansion-item"),x=(0,a.resolveComponent)("q-item"),B=(0,a.resolveComponent)("q-list"),q=(0,a.resolveComponent)("add-hook"),Z=(0,a.resolveComponent)("action-proposer"),H=(0,a.resolveComponent)("q-card"),y=(0,a.resolveComponent)("q-page");return(0,a.openBlock)(),(0,a.createBlock)(y,{padding:"",class:"constrain-page-width"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",null,[(0,a.createVNode)(u,{class:"q-pb-md",placeholder:"Find hook",outlined:"",modelValue:e.searchfilter,"onUpdate:modelValue":o[1]||(o[1]=o=>e.searchfilter=o),modelModifiers:{trim:!0},onInput:o[2]||(o[2]=o=>e.add_hook_view=!1)},{prepend:(0,a.withCtx)((()=>[(0,a.createVNode)(p,{name:"search",class:"cursor-pointer"})])),append:(0,a.withCtx)((()=>[(0,a.createVNode)(a.Transition,{appear:"","enter-active-class":"animated fadeInRight","leave-active-class":"animated fadeOutRight",tag:"div"},{default:(0,a.withCtx)((()=>[e.searchfilter.length?((0,a.openBlock)(),(0,a.createBlock)(p,{name:"close",key:"has_filter",onClick:o[0]||(o[0]=o=>e.searchfilter=""),class:"cursor-pointer"})):(0,a.createCommentVNode)("",!0)])),_:1})])),_:1},8,["modelValue"]),(0,a.createVNode)(H,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(V,{class:"bg-secondary text-white shadow-2"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(C,{shrink:!0},{default:(0,a.withCtx)((()=>[n])),_:1}),(0,a.createVNode)(f),(0,a.createVNode)(v,{round:"",dense:"",icon:e.add_hook_view?"mdi-minus":"mdi-plus",color:"primary",onClick:o[3]||(o[3]=o=>e.add_hook_view=!e.add_hook_view)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(_,{class:"bg-secondary",delay:500},{default:(0,a.withCtx)((()=>[e.add_hook_view?((0,a.openBlock)(),(0,a.createElementBlock)("span",l,"Go back to hooks")):((0,a.openBlock)(),(0,a.createElementBlock)("span",c,"Add new hook"))])),_:1})])),_:1},8,["icon"])])),_:1}),(0,a.createVNode)(a.Transition,{"enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut",mode:"out-in",tag:"div"},{default:(0,a.withCtx)((()=>[e.add_hook_view?((0,a.openBlock)(),(0,a.createBlock)(Z,{key:"addhook"},{default:(0,a.withCtx)((e=>[(0,a.createVNode)(q,{onPropose:e.propose,onAddtobucket:e.addtobucket},null,8,["onPropose","onAddtobucket"])])),_:1})):((0,a.openBlock)(),(0,a.createBlock)(B,{key:"listhooks",class:"primary-hover-list",separator:""},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.getFilteredHooks,(e=>((0,a.openBlock)(),(0,a.createBlock)(b,{clickable:"",key:e.hook_id,group:"hooks"},{header:(0,a.withCtx)((()=>[(0,a.createVNode)(N,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(g,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.hook_action_name),1)])),_:2},1024),(0,a.createVNode)(g,{caption:""},{default:(0,a.withCtx)((()=>[e.enabled?((0,a.openBlock)(),(0,a.createElementBlock)("div",r,"enabled")):((0,a.openBlock)(),(0,a.createElementBlock)("div",i,"disabled"))])),_:2},1024)])),_:2},1024),(0,a.createVNode)(N,{side:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(g,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(p,{name:"mdi-anchor"}),(0,a.createTextVNode)(" "+(0,a.toDisplayString)(e.hooked_contract)+"::"+(0,a.toDisplayString)(e.hooked_action),1)])),_:2},1024)])),_:2},1024)])),default:(0,a.withCtx)((()=>[(0,a.createVNode)(w),(0,a.createElementVNode)("div",s,[(0,a.createElementVNode)("div",null,(0,a.toDisplayString)(e.description),1)])])),_:2},1024)))),128)),e.getFilteredHooks.length?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(x,{key:0},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(N,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(g,null,{default:(0,a.withCtx)((()=>[d])),_:1})])),_:1})])),_:1}))])),_:1}))])),_:1})])),_:1})])])),_:1})}var k=t(10741);const m={class:"row q-col-gutter-md q-pb-xs q-mt-md"},p={class:"col-xs-12 col-sm-6"},u={class:"col-xs-12 col-sm-6"},C={class:"col-xs-12 col-sm-6"},f=(0,a.createElementVNode)("div",{class:"col-xs-12"},null,-1),_={class:"row justify-between full-width items-center"};function v(e,o,t,n,c,l){const r=(0,a.resolveComponent)("q-input"),i=(0,a.resolveComponent)("q-select"),s=(0,a.resolveComponent)("threshold-badge"),d=(0,a.resolveComponent)("propose-bucket-btn"),h=(0,a.resolveComponent)("q-card-section");return(0,a.openBlock)(),(0,a.createBlock)(h,null,{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",m,[(0,a.createElementVNode)("div",p,[(0,a.createVNode)(r,{ref:"hookedaction",modelValue:e.action.data.hooked_action,"onUpdate:modelValue":o[0]||(o[0]=o=>e.action.data.hooked_action=o),label:"Action",placeholder:"action",outlined:"","bottom-slots":"",maxlength:"12",rules:[e=>!!e||"* Required",e.isValidAccountName]},null,8,["modelValue","rules"])]),(0,a.createElementVNode)("div",u,[(0,a.createVNode)(r,{ref:"hookedcontract",modelValue:e.action.data.hooked_contract,"onUpdate:modelValue":o[1]||(o[1]=o=>e.action.data.hooked_contract=o),label:"Contract",outlined:"","bottom-slots":"",placeholder:"contract","no-error-icon":"",rules:[e=>!!e||"* Required"]},null,8,["modelValue","rules"])]),(0,a.createElementVNode)("div",C,[(0,a.createVNode)(i,{ref:"hookactionname",modelValue:e.action.data.hook_action_name,"onUpdate:modelValue":o[2]||(o[2]=o=>e.action.data.hook_action_name=o),options:e.hookOptions,outlined:"",label:"Hook","emit-value":"","bottom-slots":"",rules:[e=>!!e||"* Required"]},null,8,["modelValue","options","rules"])]),f,(0,a.createElementVNode)("div",_,[(0,a.createVNode)(s,{label:"",contract:e.action.account,action_name:e.action.name},null,8,["contract","action_name"]),(0,a.createVNode)(d,{onClickPropose:e.emitPropose,onClickBucket:e.emitBucket,label:"Add hook",disabled:!1},null,8,["onClickPropose","onClickBucket"])])])])),_:1})}var V=t(69917),g=t(92287),N=t(47592);const w=(0,a.defineComponent)({name:"addHook",components:{proposeBucketBtn:g.Z,thresholdBadge:V.Z},data(){return{action:{account:"",name:"hookreg",data:{hooked_action:"",hooked_contract:"",hook_action_name:"",description:""}},hookOptions:[]}},computed:{...(0,k.Se)({getHooksContract:"hooks/getHooksContract"})},methods:{isValidAccountName:N.ZF,async getHookOptions(){const e=["hookreg","hookdel","hookenable","hookedit"];let o=await this.$eos.api.rpc.get_abi(this.getHooksContract),t=o.abi.actions.filter((o=>!e.includes(o.name))),a=t.map((e=>({value:e.name,label:e.name})));this.hookOptions=a||[]},emitPropose(){if(this.$refs.hookedaction.validate(),this.$refs.hookedcontract.validate(),this.$refs.hookactionname.validate(),this.$refs.hookedaction.hasError||this.$refs.hookedcontract.hasError||this.$refs.hookactionname.hasError)return;let e=JSON.parse(JSON.stringify(this.action)),o=`Add new hook ${e.data.hook_action_name}`,t=`Add new hook ${e.data.hook_action_name} to ${e.data.hooked_contract}::${e.data.hooked_action}`;const a={actions:[e],description:t,title:o};this.$emit("propose",a)},emitBucket(){if(this.$refs.hookedaction.validate(),this.$refs.hookedcontract.validate(),this.$refs.hookactionname.validate(),this.$refs.hookedaction.hasError||this.$refs.hookedcontract.hasError||this.$refs.hookactionname.hasError)return;let e=JSON.parse(JSON.stringify(this.action));this.$emit("addtobucket",e)}},mounted(){this.action.account=this.getHooksContract,this.getHookOptions()}});var b=t(74260),x=t(25589),B=t(64689),q=t(24554),Z=t(63314),H=t(7518),y=t.n(H);const E=(0,b.Z)(w,[["render",v]]),$=E;y()(w,"components",{QCardSection:x.Z,QInput:B.Z,QIcon:q.Z,QSelect:Z.Z});var Q=t(98062);const S=(0,a.defineComponent)({name:"hooks",components:{addHook:$,actionProposer:Q.Z},data(){return{add_hook_view:!1,searchfilter:""}},computed:{...(0,k.Se)({getHooksContract:"hooks/getHooksContract",getHooks:"hooks/getHooks"}),getFilteredHooks(){if(this.getHooks&&this.getHooks.length){let e=this.getHooks;return this.searchfilter&&(e=e.filter((e=>e.hook_action_name.includes(this.searchfilter)||e.hooked_action.includes(this.searchfilter)||e.hooked_contract.includes(this.searchfilter)))),e}return[]}},methods:{},watch:{getHooksContract:{handler:async function(e,o){e&&e!=o&&!this.getHooks&&this.$store.dispatch("hooks/fetchHooks",{hooksContract:this.getHooksContract,vm:this})},immediate:!0}}});var I=t(24379),O=t(10151),A=t(39570),T=t(13747),P=t(62025),F=t(2165),R=t(5363),D=t(27011),J=t(60429),U=t(52035),L=t(2350),z=t(65869),j=t(83414);const G=(0,b.Z)(S,[["render",h]]),M=G;y()(S,"components",{QPage:I.Z,QInput:B.Z,QIcon:q.Z,QCard:O.Z,QToolbar:A.Z,QToolbarTitle:T.Z,QSpace:P.Z,QBtn:F.Z,QTooltip:R.Z,QList:D.Z,QExpansionItem:J.Z,QItemSection:U.Z,QItemLabel:L.Z,QSeparator:z.Z,QItem:j.Z})}}]);