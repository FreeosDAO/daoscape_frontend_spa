"use strict";(self["webpackChunkthedaoscapefrontend"]=self["webpackChunkthedaoscapefrontend"]||[]).push([[5269],{21776:(e,t,o)=>{o.r(t),o.d(t,{default:()=>Ne});var a=o(34182);function l(e,t,o,l,r,n){const s=(0,a.resolveComponent)("manage-thresholds"),d=(0,a.resolveComponent)("manage-threshold-links"),i=(0,a.resolveComponent)("q-page");return(0,a.openBlock)(),(0,a.createBlock)(i,{padding:"",class:"constrain-page-width"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(s),(0,a.createVNode)(d,{class:"q-mt-md"})])),_:1})}var r=o(55250);const n={key:0},s={key:1},d={key:0},i={key:1},c={key:"thresholds"},h=(0,a.createTextVNode)(" dynamic "),m=(0,a.createTextVNode)(" dynamic thresholds update automatically in function of the number of active guardians "),p=(0,a.createTextVNode)("No thresholds"),u={class:"relative-position",key:"add"};function g(e,t,o,l,r,g){const k=(0,a.resolveComponent)("q-toolbar-title"),v=(0,a.resolveComponent)("q-space"),C=(0,a.resolveComponent)("q-tooltip"),_=(0,a.resolveComponent)("q-btn"),f=(0,a.resolveComponent)("q-toolbar"),N=(0,a.resolveComponent)("q-badge"),V=(0,a.resolveComponent)("q-item-section"),x=(0,a.resolveComponent)("q-item-label"),b=(0,a.resolveComponent)("q-item"),w=(0,a.resolveComponent)("q-list"),B=(0,a.resolveComponent)("add-threshold"),T=(0,a.resolveComponent)("action-proposer"),y=(0,a.resolveComponent)("q-card-section"),q=(0,a.resolveComponent)("q-card");return(0,a.openBlock)(),(0,a.createBlock)(q,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(f,{class:"bg-secondary text-white shadow-2"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(k,{shrink:!0},{default:(0,a.withCtx)((()=>[e.add_threshold_view?((0,a.openBlock)(),(0,a.createElementBlock)("span",n,"Manage Thresholds")):((0,a.openBlock)(),(0,a.createElementBlock)("span",s,"Thresholds"))])),_:1}),(0,a.createVNode)(v),(0,a.createVNode)(_,{round:"",dense:"",icon:e.add_threshold_view?"mdi-minus":"mdi-plus",color:"primary",onClick:t[0]||(t[0]=t=>e.add_threshold_view=!e.add_threshold_view)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(C,{class:"bg-secondary",delay:500},{default:(0,a.withCtx)((()=>[e.add_threshold_view?((0,a.openBlock)(),(0,a.createElementBlock)("span",i,"Go back to thresholds")):((0,a.openBlock)(),(0,a.createElementBlock)("span",d,"manage thresholds"))])),_:1})])),_:1},8,["icon"])])),_:1}),(0,a.createVNode)(a.Transition,{"enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut",mode:"out-in",tag:"div"},{default:(0,a.withCtx)((()=>[e.add_threshold_view?((0,a.openBlock)(),(0,a.createElementBlock)("div",u,[(0,a.createVNode)(y,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(T,null,{default:(0,a.withCtx)((e=>[(0,a.createVNode)(B,{onPropose:e.propose,onAddtobucket:e.addtobucket},null,8,["onPropose","onAddtobucket"])])),_:1})])),_:1})])):((0,a.openBlock)(),(0,a.createElementBlock)("div",c,[e.getThresholdsWithFilter.length?((0,a.openBlock)(),(0,a.createBlock)(w,{key:0,class:"primary-hover-list",separator:"",striped:""},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.getThresholdsWithFilter,(e=>((0,a.openBlock)(),(0,a.createBlock)(b,{key:e.threshold_name,clickable:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(V,{side:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(N,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.threshold_name),1)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(V,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(x,{caption:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" Required votes: "+(0,a.toDisplayString)(e.threshold),1)])),_:2},1024)])),_:2},1024),"default"==e.threshold_name?((0,a.openBlock)(),(0,a.createBlock)(V,{key:0,side:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(N,{color:"secondary"},{default:(0,a.withCtx)((()=>[h,(0,a.createVNode)(C,{class:"bg-primary",delay:500},{default:(0,a.withCtx)((()=>[m])),_:1})])),_:1})])),_:1})):(0,a.createCommentVNode)("",!0)])),_:2},1024)))),128))])),_:1})):((0,a.openBlock)(),(0,a.createBlock)(w,{key:1,separator:"",striped:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(b,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(x,{caption:""},{default:(0,a.withCtx)((()=>[p])),_:1})])),_:1})])),_:1}))]))])),_:1})])),_:1})}var k=o(98062);const v={class:"row q-col-gutter-md q-pb-xs q-mt-md"},C={class:"col-xs-12 col-sm-6"},_={key:0,class:"text-warning row items-center"},f={class:"col-xs-12 col-sm-6"},N={key:0,class:"col-xs-12 col-sm-6"},V={class:"row justify-between full-width items-center"};function x(e,t,o,l,r,n){const s=(0,a.resolveComponent)("q-icon"),d=(0,a.resolveComponent)("q-input"),i=(0,a.resolveComponent)("q-toggle"),c=(0,a.resolveComponent)("threshold-badge"),h=(0,a.resolveComponent)("propose-bucket-btn");return(0,a.openBlock)(),(0,a.createElementBlock)("div",v,[(0,a.createElementVNode)("div",C,[(0,a.createVNode)(d,{ref:"thresholdname",modelValue:e.action.data.threshold_name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.action.data.threshold_name=t),label:"Name",placeholder:"threshold name",outlined:"","bottom-slots":"",maxlength:"12",rules:[e=>!!e||"* Required",e.isValidAccountName,e=>"default"!=e||"can't update the default threshold"]},{hint:(0,a.withCtx)((()=>[e.is_existing_threshold?((0,a.openBlock)(),(0,a.createElementBlock)("div",_,[(0,a.createVNode)(s,{name:"mdi-alert",class:"q-mr-xs"}),(0,a.createElementVNode)("span",null,"Update existing threshold (current: "+(0,a.toDisplayString)(e.is_existing_threshold.threshold)+")",1)])):(0,a.createCommentVNode)("",!0)])),_:1},8,["modelValue","rules"])]),(0,a.createElementVNode)("div",f,[(0,a.createVNode)(d,{ref:"threshold",type:"number",modelValue:e.action.data.threshold,"onUpdate:modelValue":t[1]||(t[1]=t=>e.action.data.threshold=t),label:"Threshold",outlined:"","bottom-slots":"",placeholder:"number of required votes","no-error-icon":"",rules:[e=>!!e||"* Required",e=>e>=0||"Must be greater then zero"]},null,8,["modelValue","rules"])]),e.is_existing_threshold?((0,a.openBlock)(),(0,a.createElementBlock)("div",N,[(0,a.createVNode)(a.Transition,{"enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut",mode:"out-in",tag:"div"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(i,{modelValue:e.action.data.remove,"onUpdate:modelValue":t[2]||(t[2]=t=>e.action.data.remove=t),"left-label":"",label:"Delete this threshold"},null,8,["modelValue"])])),_:1})])):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("div",V,[(0,a.createVNode)(c,{label:"",contract:e.action.account,action_name:e.action.name},null,8,["contract","action_name"]),(0,a.createVNode)(h,{onClickPropose:e.emitPropose,onClickBucket:e.emitBucket,label:e.is_existing_threshold?"update threshold":"Add Threshold",disabled:!1},null,8,["onClickPropose","onClickBucket","label"])])])}var b=o(69917),w=o(92287),B=o(47592);o(63850);const T=(0,a.defineComponent)({name:"addThreshold",components:{thresholdBadge:b.Z,proposeBucketBtn:w.Z},props:{},data(){return{action:{account:"",name:"manthreshold",data:{threshold_name:"",threshold:"",remove:!1}}}},computed:{...(0,r.Se)({getActiveGroup:"group/getActiveGroup",getGroupWallet:"group/getGroupWallet",getThresholds:"group/getThresholds"}),is_existing_threshold(){return"default"!=this.action.data.threshold_name&&this.getThresholds.find((e=>e.threshold_name==this.action.data.threshold_name))}},methods:{isValidAccountName:B.ZF,isExistingAccountName:B.oO,emitPropose(){if(this.$refs.thresholdname.validate(),this.action.data.remove||this.$refs.threshold.validate(),this.$refs.thresholdname.hasError||this.$refs.threshold.hasError)return;let e=JSON.parse(JSON.stringify(this.action)),t="Add new threshold",o=`Add new threshold "${e.data.threshold_name}" with required votes ${e.data.threshold}`;this.is_existing_threshold&&!e.data.remove?(t="Update threshold",o=`Update number of required approvals from threshold "${e.data.threshold_name}" from ${this.is_existing_threshold.threshold} to ${e.data.threshold}`):this.is_existing_threshold&&e.data.remove&&(e.data.threshold=0,t="Delete threshold",o=`Delete existing threshold "${e.data.threshold_name}"`);const a={actions:[e],description:o,title:t};this.$emit("propose",a)},emitBucket(){if(this.$refs.thresholdname.validate(),this.$refs.threshold.validate(),this.$refs.thresholdname.hasError||this.$refs.threshold.hasError)return;let e=JSON.parse(JSON.stringify(this.action));this.$emit("addtobucket",e)}},mounted(){this.action.account=this.getActiveGroup},watch:{}});var y=o(74260),q=o(64689),Z=o(24554),A=o(28886),E=o(7518),Q=o.n(E);const S=(0,y.Z)(T,[["render",x]]),L=S;Q()(T,"components",{QInput:q.Z,QIcon:Z.Z,QToggle:A.Z});const G=(0,a.defineComponent)({name:"manageThresholds",components:{actionProposer:k.Z,addThreshold:L},data(){return{add_threshold_view:!1}},computed:{...(0,r.Se)({getAccountName:"proton/getAccountName",getThresholds:"group/getThresholds",getActiveGroup:"group/getActiveGroup",getActiveGroupConfig:"group/getActiveGroupConfig",getThresholdLinks:"group/getThresholdLinks"}),getThresholdsWithFilter(){return this.getThresholds}},methods:{}});var $=o(10151),P=o(39570),I=o(13747),O=o(62025),D=o(2165),F=o(5363),W=o(27011),U=o(83414),z=o(52035),J=o(69721),R=o(2350),M=o(25589);const j=(0,y.Z)(G,[["render",g]]),H=j;Q()(G,"components",{QCard:$.Z,QToolbar:P.Z,QToolbarTitle:I.Z,QSpace:O.Z,QBtn:D.Z,QTooltip:F.Z,QList:W.Z,QItem:U.Z,QItemSection:z.Z,QBadge:J.Z,QItemLabel:R.Z,QCardSection:M.Z});const K={key:0},X={key:1},Y={key:0},ee={key:1},te={key:"thresholds"},oe={class:"relative-position",key:"add"};function ae(e,t,o,l,r,n){const s=(0,a.resolveComponent)("q-toolbar-title"),d=(0,a.resolveComponent)("q-space"),i=(0,a.resolveComponent)("q-tooltip"),c=(0,a.resolveComponent)("q-btn"),h=(0,a.resolveComponent)("q-toolbar"),m=(0,a.resolveComponent)("q-badge"),p=(0,a.resolveComponent)("q-item-label"),u=(0,a.resolveComponent)("q-item-section"),g=(0,a.resolveComponent)("q-item"),k=(0,a.resolveComponent)("no-items"),v=(0,a.resolveComponent)("q-list"),C=(0,a.resolveComponent)("add-threshold-link"),_=(0,a.resolveComponent)("action-proposer"),f=(0,a.resolveComponent)("q-card-section"),N=(0,a.resolveComponent)("q-card");return(0,a.openBlock)(),(0,a.createBlock)(N,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(h,{class:"bg-secondary text-white shadow-2"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(s,{shrink:!0},{default:(0,a.withCtx)((()=>[e.add_threshold_link?((0,a.openBlock)(),(0,a.createElementBlock)("span",K,"Add Threshold Link")):((0,a.openBlock)(),(0,a.createElementBlock)("span",X,"Threshold Action Links"))])),_:1}),(0,a.createVNode)(d),(0,a.createVNode)(c,{round:"",dense:"",icon:e.add_threshold_link?"mdi-minus":"mdi-plus",color:"primary",onClick:t[0]||(t[0]=t=>e.add_threshold_link=!e.add_threshold_link)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(i,{class:"bg-secondary",delay:500},{default:(0,a.withCtx)((()=>[e.add_threshold_link?((0,a.openBlock)(),(0,a.createElementBlock)("span",ee,"Go back to threshold links")):((0,a.openBlock)(),(0,a.createElementBlock)("span",Y,"Add threshold link"))])),_:1})])),_:1},8,["icon"])])),_:1}),(0,a.createVNode)(a.Transition,{"enter-active-class":"animated zoomIn","leave-active-class":"animated zoomOut",mode:"out-in",tag:"div"},{default:(0,a.withCtx)((()=>[e.add_threshold_link?((0,a.openBlock)(),(0,a.createElementBlock)("div",oe,[(0,a.createVNode)(f,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(_,null,{default:(0,a.withCtx)((e=>[(0,a.createVNode)(C,{onPropose:e.propose,onAddtobucket:e.addtobucket},null,8,["onPropose","onAddtobucket"])])),_:1})])),_:1})])):((0,a.openBlock)(),(0,a.createElementBlock)("div",te,[e.getThresholdLinksWithFilter.length?((0,a.openBlock)(),(0,a.createBlock)(v,{key:0,class:"primary-hover-list",separator:"",striped:""},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.getThresholdLinksWithFilter,(e=>((0,a.openBlock)(),(0,a.createBlock)(g,{key:e.contract+e.action_name,clickable:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{side:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(p,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(e.contract)+"::",1),(0,a.createElementVNode)("b",null,(0,a.toDisplayString)(e.action_name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),(0,a.createVNode)(u,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(p,{caption:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" Threshold: "+(0,a.toDisplayString)(e.threshold_name),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128)),e.getThresholdLinksWithFilter.length?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(k,{key:0,text:"No links found"}))])),_:1})):((0,a.openBlock)(),(0,a.createBlock)(v,{key:1,separator:"",striped:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(k,{text:"All actions require the default threshold"})])),_:1}))]))])),_:1})])),_:1})}const le={class:"row q-col-gutter-md q-pb-xs q-mt-md"},re={class:"col-xs-12 col-sm-6"},ne={class:"col-xs-12 col-sm-6"},se={class:"col-xs-12 col-sm-6"},de={class:"row justify-between full-width items-center"};function ie(e,t,o,l,r,n){const s=(0,a.resolveComponent)("q-input"),d=(0,a.resolveComponent)("q-item-label"),i=(0,a.resolveComponent)("q-item-section"),c=(0,a.resolveComponent)("q-tooltip"),h=(0,a.resolveComponent)("q-icon"),m=(0,a.resolveComponent)("q-item"),p=(0,a.resolveComponent)("q-select"),u=(0,a.resolveComponent)("threshold-badge"),g=(0,a.resolveComponent)("propose-bucket-btn");return(0,a.openBlock)(),(0,a.createElementBlock)("div",le,[(0,a.createElementVNode)("div",re,[(0,a.createVNode)(s,{ref:"contract",modelValue:e.action.data.contract,"onUpdate:modelValue":t[0]||(t[0]=t=>e.action.data.contract=t),label:"Contract",placeholder:"contract name",outlined:"","bottom-slots":"",maxlength:"12",rules:[]},null,8,["modelValue"])]),(0,a.createElementVNode)("div",ne,[(0,a.createVNode)(s,{ref:"actionname",modelValue:e.action.data.action_name,"onUpdate:modelValue":t[1]||(t[1]=t=>e.action.data.action_name=t),label:"Action",outlined:"","bottom-slots":"",placeholder:"name of the action","no-error-icon":"",rules:[]},null,8,["modelValue"])]),(0,a.createElementVNode)("div",se,[(0,a.createVNode)(p,{ref:"thresholdname",borderless:"",modelValue:e.action.data.threshold_name,"onUpdate:modelValue":t[2]||(t[2]=t=>e.action.data.threshold_name=t),options:e.threshold_options(),outlined:"",label:"Threshold","bottom-slots":"","emit-value":"",rules:[e=>!!e||"* Required"]},{option:(0,a.withCtx)((t=>[(0,a.createVNode)(m,(0,a.normalizeProps)((0,a.guardReactiveProps)(t.itemProps)),{default:(0,a.withCtx)((()=>[(0,a.createVNode)(i,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{innerHTML:t.opt.label},null,8,["innerHTML"]),(0,a.createVNode)(d,{caption:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("Required approvals "+(0,a.toDisplayString)(t.opt.threshold),1)])),_:2},1024)])),_:2},1024),t.opt.warning?((0,a.openBlock)(),(0,a.createBlock)(i,{key:0,side:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(h,{name:"mdi-alert",color:"warning"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{class:"bg-secondary",delay:500},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" Threshold exceeds number of guardians "+(0,a.toDisplayString)(e.getNumberGuardians),1)])),_:1})])),_:1})])),_:1})):(0,a.createCommentVNode)("",!0)])),_:2},1040)])),_:1},8,["modelValue","options","rules"])]),(0,a.createElementVNode)("div",de,[(0,a.createVNode)(u,{label:"",contract:e.action.account,action_name:e.action.name},null,8,["contract","action_name"]),(0,a.createVNode)(g,{onClickPropose:e.emitPropose,onClickBucket:e.emitBucket,label:"Link Threshold",disabled:!1},null,8,["onClickPropose","onClickBucket"])])])}const ce=(0,a.defineComponent)({name:"addThresholdLink",components:{thresholdBadge:b.Z,proposeBucketBtn:w.Z},props:{},data(){return{action:{account:"",name:"manthreshlin",data:{contract:"",action_name:"",threshold_name:"",remove:!1}}}},computed:{...(0,r.Se)({getActiveGroup:"group/getActiveGroup",getGroupWallet:"group/getGroupWallet",getThresholds:"group/getThresholds",getNumberGuardians:"group/getNumberGuardians"})},methods:{isValidAccountName:B.ZF,isExistingAccountName:B.oO,threshold_options(){return this.getThresholds.map((e=>{let t=this.getNumberGuardians<e.threshold;return{label:e.threshold_name,value:e.threshold_name,threshold:e.threshold,warning:t}}))},emitPropose(){if(this.$refs.thresholdname.validate(),this.$refs.thresholdname.hasError)return;let e=JSON.parse(JSON.stringify(this.action)),t="Link threshold",o=`Link threshold "${e.data.threshold_name}" to ${e.data.contract}::${e.data.action_name}`;const a={actions:[e],description:o,title:t};this.$emit("propose",a)},emitBucket(){if(this.$refs.thresholdname.validate(),this.$refs.thresholdname.hasError)return;let e=JSON.parse(JSON.stringify(this.action));this.$emit("addtobucket",e)}},mounted(){this.action.account=this.getActiveGroup},watch:{}});var he=o(63314);const me=(0,y.Z)(ce,[["render",ie]]),pe=me;Q()(ce,"components",{QInput:q.Z,QSelect:he.Z,QItem:U.Z,QItemSection:z.Z,QItemLabel:R.Z,QIcon:Z.Z,QTooltip:F.Z});var ue=o(3229);const ge=(0,a.defineComponent)({name:"manageThresholds",components:{actionProposer:k.Z,addThresholdLink:pe,noItems:ue.Z},data(){return{add_threshold_link:!1}},computed:{...(0,r.Se)({getAccountName:"proton/getAccountName",getThresholds:"group/getThresholds",getActiveGroup:"group/getActiveGroup",getActiveGroupConfig:"group/getActiveGroupConfig",getThresholdLinks:"group/getThresholdLinks"}),getThresholdLinksWithFilter(){return this.getThresholdLinks}},methods:{}}),ke=(0,y.Z)(ge,[["render",ae]]),ve=ke;Q()(ge,"components",{QCard:$.Z,QToolbar:P.Z,QToolbarTitle:I.Z,QSpace:O.Z,QBtn:D.Z,QTooltip:F.Z,QList:W.Z,QItem:U.Z,QItemSection:z.Z,QItemLabel:R.Z,QBadge:J.Z,QCardSection:M.Z});const Ce=(0,a.defineComponent)({name:"groupThresholds",components:{manageThresholds:H,manageThresholdLinks:ve},data(){return{}},computed:{...(0,r.Se)({getAccountName:"proton/getAccountName",getThresholds:"group/getThresholds",getActiveGroup:"group/getActiveGroup",getThresholdLinks:"group/getThresholdLinks"})}});var _e=o(24379);const fe=(0,y.Z)(Ce,[["render",l]]),Ne=fe;Q()(Ce,"components",{QPage:_e.Z})}}]);