"use strict";(self["webpackChunkthedaoscapefrontend"]=self["webpackChunkthedaoscapefrontend"]||[]).push([[5134],{53890:(e,t,r)=>{r.r(t),r.d(t,{default:()=>N});var o=r(34182);const s={class:"row justify-between items-center"},a={key:0},n={key:1},c={key:0,class:"row justify-end q-mt-sm text-weight-light"};function i(e,t,r,i,m,l){const g=(0,o.resolveComponent)("page-header"),d=(0,o.resolveComponent)("q-btn"),u=(0,o.resolveComponent)("q-checkbox"),p=(0,o.resolveComponent)("q-card-section"),h=(0,o.resolveComponent)("q-card"),C=(0,o.resolveComponent)("latest-userterms"),b=(0,o.resolveComponent)("q-page");return(0,o.openBlock)(),(0,o.createBlock)(b,{padding:"",class:"constrain-page-width"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(g,{title:"Member Registration"}),(0,o.createVNode)(h,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p,null,{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",s,[e.getIsMember?((0,o.openBlock)(),(0,o.createElementBlock)("div",n,"You are a member")):((0,o.openBlock)(),(0,o.createElementBlock)("div",a,"You are not a member of this group")),e.getIsMember?((0,o.openBlock)(),(0,o.createBlock)(d,{key:3,label:"unregister",color:"primary",onClick:e.unregmember,loading:e.is_transacting},null,8,["onClick","loading"])):((0,o.openBlock)(),(0,o.createBlock)(d,{key:2,label:"register",color:"primary",onClick:e.regmember,loading:e.is_transacting},null,8,["onClick","loading"]))]),e.getCoreConfig&&e.getCoreConfig.conf.userterms?((0,o.openBlock)(),(0,o.createElementBlock)("div",c,[(0,o.createVNode)(u,{modelValue:e.agree_terms,"onUpdate:modelValue":t[0]||(t[0]=t=>e.agree_terms=t),"left-label":"",label:"I have read and I agree to the user terms."},null,8,["modelValue"])])):(0,o.createCommentVNode)("",!0)])),_:1})])),_:1}),(0,o.createVNode)(h,{class:"q-mt-md"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(C)])),_:1})])),_:1})}var m=r(55250),l=r(33314),g=r(58094);const d=(0,o.defineComponent)({name:"vote",components:{pageHeader:l.Z,latestUserterms:g.Z},data(){return{agree_terms:!1,is_transacting:!1}},computed:{...(0,m.Se)({getAccountName:"proton/getAccountName",getActiveGroup:"group/getActiveGroup",getIsMember:"user/getIsMember",getCoreConfig:"group/getCoreConfig",getLatestUserterms:"group/getLatestUserterms"})},methods:{async regmember(){let e={account:this.getActiveGroup,name:"regmember",data:{actor:this.getAccountName}},t={account:this.getActiveGroup,name:"signuserterm",data:{member:this.getAccountName,agree_terms:this.agree_terms}},r=[e];this.getCoreConfig.conf.userterms&&r.push(t),this.is_transacting=!0;let o=await this.$store.dispatch("proton/transact",{actions:r,disable_signing_overlay:!0});if(o&&o.trxid){let e=this.getLatestUserterms&&this.getLatestUserterms.id&&this.agree_terms?this.getLatestUserterms.id:0;this.$store.commit("user/setIsMember",{account:this.getAccountName,member_since:o.block_time,agreed_userterms_version:e})}this.is_transacting=!1},async unregmember(){let e={account:this.getActiveGroup,name:"unregmember",data:{actor:this.getAccountName}};this.is_transacting=!0;let t=await this.$store.dispatch("proton/transact",{actions:[e],disable_signing_overlay:!0});t&&t.trxid&&this.$store.commit("user/setIsMember",!1),this.is_transacting=!1}}});var u=r(74260),p=r(24379),h=r(10151),C=r(25589),b=r(2165),k=r(65735),_=r(7518),v=r.n(_);const f=(0,u.Z)(d,[["render",i]]),N=f;v()(d,"components",{QPage:p.Z,QCard:h.Z,QCardSection:C.Z,QBtn:b.Z,QCheckbox:k.Z})}}]);