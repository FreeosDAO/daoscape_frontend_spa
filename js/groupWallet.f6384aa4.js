"use strict";(self["webpackChunkthedaoscapefrontend"]=self["webpackChunkthedaoscapefrontend"]||[]).push([[157],{73863:(e,t,o)=>{o.r(t),o.d(t,{default:()=>z});var n=o(34182);function a(e,t,o,a,l,r){const i=(0,n.resolveComponent)("pageHeader"),c=(0,n.resolveComponent)("transfer"),d=(0,n.resolveComponent)("actionProposer"),s=(0,n.resolveComponent)("q-card-section"),u=(0,n.resolveComponent)("q-card"),p=(0,n.resolveComponent)("q-page");return(0,n.openBlock)(),(0,n.createBlock)(p,{padding:"",class:"constrain-page-width"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(i,{title:"Group Wallet"}),(0,n.createVNode)(u,null,{default:(0,n.withCtx)((()=>[(0,n.createVNode)(s,null,{default:(0,n.withCtx)((()=>[(0,n.createVNode)(d,null,{default:(0,n.withCtx)((e=>[(0,n.createVNode)(c,{onPropose:e.propose,onAddtobucket:e.addtobucket},null,8,["onPropose","onAddtobucket"])])),_:1})])),_:1})])),_:1})])),_:1})}var l=o(10741),r=o(98062);const i={key:0},c={class:"text-weight-bold"},d=(0,n.createTextVNode)("Group Balance"),s={class:"q-mb-md"},u=(0,n.createTextVNode)(" No Tokens "),p={class:"column q-gutter-md"},m={key:0,class:"text-grey-8 row"},h=(0,n.createElementVNode)("span",null,"Account found",-1),_=[h],g={key:1},k={key:0,class:"text-grey-8 row"},f={key:1},x={class:"row justify-end"},N={style:{height:"40px"}},V=(0,n.createTextVNode)("Add To Bucket"),y={key:1,class:"text-grey-7 text-weight-light"},v=(0,n.createTextVNode)(" Group doesn't own any tokens. Transfer to \""),C=(0,n.createTextVNode)('" to fund the group. ');function w(e,t,o,a,l,r){const h=(0,n.resolveComponent)("q-img"),w=(0,n.resolveComponent)("q-item-section"),b=(0,n.resolveComponent)("q-item-label"),q=(0,n.resolveComponent)("q-item"),G=(0,n.resolveComponent)("q-icon"),A=(0,n.resolveComponent)("q-select"),B=(0,n.resolveComponent)("q-input"),S=(0,n.resolveComponent)("q-btn");return(0,n.openBlock)(),(0,n.createElementBlock)("div",null,[e.getGroupWallet.length?((0,n.openBlock)(),(0,n.createElementBlock)("div",i,[(0,n.createVNode)(q,{clickable:"",onClick:e.toggleTokenSelector,id:"tokendisplay"},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(w,{avatar:""},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(h,{contain:"",src:e.getGroupWallet[e.selected_token_index].logo,"spinner-color":"white",style:{height:"60px",width:"60px"}},null,8,["src"])])),_:1}),(0,n.createVNode)(w,null,{default:(0,n.withCtx)((()=>[(0,n.createVNode)(b,{class:"text-weight-light text-h6"},{default:(0,n.withCtx)((()=>[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(e.getGroupWallet[e.selected_token_index].amount),1),(0,n.createElementVNode)("span",c,(0,n.toDisplayString)(e.getGroupWallet[e.selected_token_index].symbol),1)])),_:1}),(0,n.createVNode)(b,{caption:""},{default:(0,n.withCtx)((()=>[d])),_:1})])),_:1}),(0,n.createVNode)(w)])),_:1},8,["onClick"]),(0,n.createElementVNode)("div",s,[(0,n.createVNode)(A,{"hide-dropdown-icon":"",ref:"token_selector",modelValue:e.selected_token_index,"onUpdate:modelValue":t[0]||(t[0]=t=>e.selected_token_index=t),options:e.tokenoptions,filter:"","hide-selected":"","emit-value":"","use-input":"",onFilter:e.filterFn,placeholder:"Find token",for:"tokendisplay",onPopupShow:t[1]||(t[1]=t=>e.token_selector_popup=!0),onPopupHide:t[2]||(t[2]=t=>e.token_selector_popup=!1),autocomplete:"off",onInput:t[3]||(t[3]=t=>e.transfer_action.data.quantity="")},{prepend:(0,n.withCtx)((()=>[(0,n.createVNode)(G,{name:"search",class:"q-ml-md"})])),selected:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.getGroupWallet[e.selected_token_index].symbol),1)])),option:(0,n.withCtx)((e=>[(0,n.createVNode)(q,(0,n.normalizeProps)((0,n.guardReactiveProps)(e.itemProps)),{default:(0,n.withCtx)((()=>[(0,n.createVNode)(w,{avatar:""},{default:(0,n.withCtx)((()=>[(0,n.createVNode)(G,{name:e.opt.icon},null,8,["name"])])),_:2},1024),(0,n.createVNode)(w,null,{default:(0,n.withCtx)((()=>[(0,n.createVNode)(b,{innerHTML:e.opt.label},null,8,["innerHTML"]),(0,n.createVNode)(b,{caption:""},{default:(0,n.withCtx)((()=>[(0,n.createTextVNode)((0,n.toDisplayString)(e.opt.description),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),"no-option":(0,n.withCtx)((()=>[(0,n.createVNode)(q,null,{default:(0,n.withCtx)((()=>[(0,n.createVNode)(w,{class:"text-italic text-grey"},{default:(0,n.withCtx)((()=>[u])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"])]),(0,n.createElementVNode)("div",p,[(0,n.createVNode)(B,{outlined:"",label:"From",readonly:"",modelValue:e.transfer_action.data.from,"onUpdate:modelValue":t[4]||(t[4]=t=>e.transfer_action.data.from=t),placeholder:"Receiver"},null,8,["modelValue"]),(0,n.createVNode)(B,{outlined:"",label:"To",modelValue:e.transfer_action.data.to,"onUpdate:modelValue":t[5]||(t[5]=t=>e.transfer_action.data.to=t),placeholder:"Receiver","bottom-slots":"","no-error-icon":"",maxlength:"12",debounce:500,rules:[e=>!!e||"* Required",e.isValidAccountName,e.isExistingAccountNameWrapper]},{hint:(0,n.withCtx)((()=>[e.to_input_validated?((0,n.openBlock)(),(0,n.createElementBlock)("span",m,_)):((0,n.openBlock)(),(0,n.createElementBlock)("span",g,"Receiver account"))])),_:1},8,["modelValue","rules"]),(0,n.createVNode)(B,{type:"number",outlined:"",label:"Quantity",modelValue:e.transfer_action.data.quantity,"onUpdate:modelValue":t[6]||(t[6]=t=>e.transfer_action.data.quantity=t),placeholder:"Amount","no-error-icon":"",rules:[e=>!!e||"* Required",e=>e>0||"Must be greater then zero",e.validateAmount]},{hint:(0,n.withCtx)((()=>[e.quantity_input_validated?((0,n.openBlock)(),(0,n.createElementBlock)("span",k,[(0,n.createElementVNode)("span",null,(0,n.toDisplayString)(Number(e.transfer_action.data.quantity).toFixed(e.getGroupWallet[e.selected_token_index].precision))+" "+(0,n.toDisplayString)(e.getGroupWallet[e.selected_token_index].symbol),1)])):((0,n.openBlock)(),(0,n.createElementBlock)("span",f,"Amount to send"))])),append:(0,n.withCtx)((()=>[(0,n.createElementVNode)("div",null,(0,n.toDisplayString)(e.getGroupWallet[e.selected_token_index].symbol),1)])),_:1},8,["modelValue","rules"]),(0,n.createVNode)(B,{label:"Memo",modelValue:e.transfer_action.data.memo,"onUpdate:modelValue":t[7]||(t[7]=t=>e.transfer_action.data.memo=t),outlined:"",type:"textarea",placeholder:"Memo"},null,8,["modelValue"]),(0,n.createElementVNode)("div",x,[(0,n.createElementVNode)("div",N,[(0,n.createVNode)(S,{color:"primary",disable:!e.to_input_validated||!e.quantity_input_validated,onClick:e.emitBucket},{default:(0,n.withCtx)((()=>[V])),_:1},8,["disable","onClick"])])])])])):((0,n.openBlock)(),(0,n.createElementBlock)("div",y,[v,(0,n.createElementVNode)("b",null,(0,n.toDisplayString)(e.getActiveGroup),1),C]))])}var b=o(92287),q=o(1675),G=o(47592);const A=(0,n.defineComponent)({name:"transfer",components:{proposeBucketBtn:b.Z,findAccount:q.Z},data(){return{token_selector_popup:!1,tokenoptions:[],needle:"",selected_token_index:0,view:"transfer",transfer_action:{account:"",name:"transfer",data:{from:this.$route.params.groupname,to:"",quantity:"",memo:""}},description:"",title:"",to_input_validated:!1,quantity_input_validated:!1}},computed:{...(0,l.Se)({getAccountName:"proton/getAccountName",getGroupWallet:"group/getGroupWallet",getActiveGroup:"group/getActiveGroup",getThresholdLinks:"group/getThresholdLinks"}),getTokenSelectOptions(){if(this.getGroupWallet.length){let e=this.getGroupWallet.map(((e,t)=>{let o={label:e.symbol,value:t,description:e.quantity,icon:`img:${e.logo}`};return o}));return e}}},methods:{isValidAccountName:G.ZF,isExistingAccountName:G.oO,async isExistingAccountNameWrapper(e){let t=await(0,G.oO)({value:e,vm:this});return!0===t&&(this.to_input_validated=!0),t},validateAmount(e){let t=this.getGroupWallet[this.selected_token_index];return t?Number(e)>Number(t.amount)?`Group only has ${t.amount} ${t.symbol}`:(this.quantity_input_validated=!0,!0):`Group doesn't have ${this.symbol} in wallet`},toggleTokenSelector(){this.token_selector_popup||this.$refs.token_selector.showPopup()},emitPropose(){let e=JSON.parse(JSON.stringify(this.transfer_action)),t=this.getGroupWallet[this.selected_token_index];e.account=t.contract,e.data.from=this.getActiveGroup,e.data.quantity=Number(e.data.quantity).toFixed(t.precision)+" "+t.symbol;const o={actions:[e],description:"This is a default description",title:`Transfer ${e.data.quantity}`};this.$emit("propose",o)},emitBucket(){let e=JSON.parse(JSON.stringify(this.transfer_action)),t=this.getGroupWallet[this.selected_token_index];e.account=t.contract,e.data.from=this.getActiveGroup,e.data.quantity=Number(e.data.quantity).toFixed(t.precision)+" "+t.symbol,this.$emit("addtobucket",e)},filterFn(e,t){t(""!==e?()=>{this.tokenoptions=this.getTokenSelectOptions.filter((t=>t.label.includes(e.toUpperCase())))}:()=>{this.tokenoptions=this.getTokenSelectOptions})}},watch:{}});var B=o(74260),S=o(83414),T=o(52035),E=o(24152),W=o(2350),Z=o(63314),P=o(24554),Q=o(64689),F=o(2165),O=o(7518),$=o.n(O);const D=(0,B.Z)(A,[["render",w]]),I=D;$()(A,"components",{QItem:S.Z,QItemSection:T.Z,QImg:E.Z,QItemLabel:W.Z,QSelect:Z.Z,QIcon:P.Z,QInput:Q.Z,QBtn:F.Z});var R=o(33314);const U=(0,n.defineComponent)({name:"groupWallet",components:{actionProposer:r.Z,transfer:I,pageHeader:R.Z},data(){return{}},computed:{...(0,l.Se)({getAccountName:"proton/getAccountName"})},methods:{},watch:{}});var H=o(24379),L=o(10151),M=o(25589);const J=(0,B.Z)(U,[["render",a]]),z=J;$()(U,"components",{QPage:H.Z,QCard:L.Z,QCardSection:M.Z})}}]);